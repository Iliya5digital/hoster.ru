function onWindowWidthResize(t){var e=$(window).width();"function"==typeof t&&$(window).resize(function(){var a=$(this).width();e!==a&&(e=a,t.call(this))})}function gaIterateTrackers(t){try{window.ga(function(){var e=ga.getAll();e.forEach(t)})}catch(e){window.console.warn(e)}}function getTrackerNameAsPrefix(t){var e=t.get("name");return e?e+".":""}function gaIterateTrackersNamePrefixes(t){gaIterateTrackers(function(e){t(getTrackerNameAsPrefix(e))})}function gaLoaded(t,e){return"function"!=typeof window.ga?setTimeout(function(){gaLoaded(t)},e||1e3):void t()}function parseGetParameters(){return window.location.search.slice(1).split("&").filter(Boolean).reduce(function(t,e){var a=e.split("=");return t[a[0]]=a[1],t},{})}("ontouchstart"in window||navigator.msMaxTouchPoints)&&(document.documentElement.className+=" touch-device"),localStorage.getItem("appliedCookies")||$("#disclaimer").css("display","block"),$("#disclaimer .close").click(function(){localStorage.setItem("appliedCookies","1"),$("#disclaimer").css("display","none")}),window.innerWidth<601&&$(document).on("scroll",function(){window.scrollY>100&&($("#disclaimer").css("display","none"),$(document).unbind("scroll"))}),$(function(){$(".__fi_2__").replaceWith('<input type="text" class="form-control" name="login" autocomplete="off" placeholder="Ваш логин"/>'),$(".__fi_3__").replaceWith('<input type="text" class="form-control" id="agr_number" name="agr_number" autocomplete="off" placeholder="Номер договора"/>'),$(".__fi_4__").replaceWith('<input type="text" class="form-control" id="domain" name="domain" autocomplete="off" placeholder="Доменное имя"/>'),$(".__fi_5__").replaceWith('<input type="tel" name="phone" class="form-control js-phone-mask" placeholder="+7 (___) ___-__-__" required>')}),$(function(){function t(t,e){var a=t.data("switcher-id");a&&$("[data-switcher-subscriber]").each(function(){var t=$(this),i=t.data("switcher-subscriber"),o=t.data("switcher-state");i===a&&t[o===e?"show":"hide"]()})}$(document).on("click",".switcher__label",function(){var e=$(this),a=e.data("name"),i=e.closest(".switcher__controls").find(".switcher__handle"),o=e.closest(".switcher").find(".switcher__content"),s=e.closest(".switcher").find('.switcher__content[data-name="'+a+'"]');"on"===a?i.addClass("switcher__handle--on"):i.removeClass("switcher__handle--on"),o.removeClass("switcher__content--active"),s.addClass("switcher__content--active"),t(e.closest(".switcher"),a)}),$(document).on("click",".switcher__handle",function(){var e=$(this),a=e.hasClass("switcher__handle--on")?"off":"on",i=e.closest(".switcher").find(".switcher__content"),o=e.closest(".switcher").find('.switcher__content[data-name="'+a+'"]');"on"===a?e.addClass("switcher__handle--on"):e.removeClass("switcher__handle--on"),i.removeClass("switcher__content--active"),o.addClass("switcher__content--active"),t(e.closest(".switcher"),a)})}),$(function(){if("/payments/success"===window.location.pathname){var t=5;setInterval(function(){document.getElementById("paymentTimer").innerHTML="00:00:0"+t,t?t--:window.location.replace("https://cp.hoster.ru/")},1e3)}}),$(function(){$(document).on("click",".switcher__radio .variant label",function(){var t=$(this),e=t.attr("for"),a=t.closest(".switcher__content");a.find(".vps-tariffs").removeClass("vps-tariffs__active"),a.find("."+e).addClass("vps-tariffs__active")})}),$(function(){$(".js-site-style-button").each(function(){var t=$(this);t.addClass("button button--orange-inverse"),t.html("<span>"+t.html()+"</span>"),t.parent().is("p")?t.parent().addClass("text-center"):t.wrap('<div class="text-center" />')})}),$(function(){new PhoneMask(document.querySelectorAll(".js-phone-mask"),{pattern:"+7 (___) ___-__-__",patternChar:"_"})}),function(){var t=$("body");void 0===t.css("flex")&&t.addClass("no-flex")}(),function(){function t(t){var a=("string"==typeof t&&t.startsWith("#")?t:window.location.hash).slice(1);if(a.startsWith("highlight")){e();var i=a.split(":").pop();if(i){var o=i.split(",");if(o.length){var s=$(o[0]);s.length&&($("body").addClass("highlight-overlay highlight-overlay--visible"),$(i).addClass("highlight"),window.location.hash="",$("html,body").animate({scrollTop:s.offset().top-$("header.header").height()},700))}}}}function e(){$(".highlight").removeClass("highlight"),$("body").removeClass("highlight-overlay--visible")}t(),$(window).on("hashchange",t),$("body").on("click",e),window.highlightElements=t}(),$.fn.setEqualHeights=function(t){return this.each(function(){function e(){i.css({height:"auto"}),i.each(function(){var t=$(this).innerHeight();t>a&&(a=t)}),i.css({height:a+"px"})}var a=0,i=$(t,this),o=$("img",this),s=0;i.length<=1||(o.length?o.each(function(){this.onload=function(){s++,s===o.length&&e()}}):e())})},window.yandexGoals=function(){function t(t,a){if(e){var i="Yandex reachGoal error";window.console.group(i),window.console.log("Yandex goal id:",a),window.console.error(t.message),window.console.groupEnd(i)}}var e=function(){var t=document.cookie.match(/_ym_debug=(\d)/);return!!t&&"1"===t[1]}();return{reach:function(e,a){try{ym(21148624,"reachGoal",e,a)}catch(i){t(i,e)}}}}(),window.gaGoals=function(){function t(t,a,i){if(e){var o="GA reachGoal error";window.console.group(o),window.console.log("GA goal id:",i),window.console.log("GA goal category:",a),window.console.error(t.message),window.console.groupEnd(o)}}var e=function(){var t=document.cookie.match(/_ym_debug=(\d)/);return!!t&&"1"===t[1]}();return{reach:function(e,a){try{gaIterateTrackersNamePrefixes(function(t){window.ga(t+"send","event",e,a)})}catch(i){t(i,e,a)}}}}(),window.vkGoals=function(){var t=[],e=function(t){try{VK.Retargeting.Event(t)}catch(e){console.warn(e)}},a=function(){setTimeout(function(){return window.VK&&window.VK.Retargeting?void t.forEach(e):a()},500)};return{reach:function(i){return window.VK&&window.VK.Retargeting?void e(i):(t.push(i),void a())}}}(),window.facebookGoals=function(){var t=function(t){try{fbq("track",t)}catch(e){console.warn(e)}};return{reach:function(e){switch(e){case"add-to-cart":t("AddToCart");break;case"order-button-click":t("InitiateCheckout");break;case"registration-with-order-success":t("AddPaymentInfo")}}}}(),window.hosterAnalytics=function(){function t(t){var e,a;switch(t){case"linux_hdd":case"linux_ssd":e="shared-hosting",a="Shared hosting";break;case"vps":case"umi":case"ssl":e=t,a=t.toUpperCase();break;default:t&&(e=t.replace(/_/g,"-"),a=t[0].toUpperCase()+t.slice(1).replace(/_/g," "))}return{itemTypeForUrl:e,category:a}}function e(t,e,a,o){return function(){try{gaLoaded(function(){gaIterateTrackersNamePrefixes(function(s){ga(s+"send","pageview",i+t),ga.apply(ga,[s+"send","event",e,a,o].filter(Boolean))})}),window.yandexGoals.reach(e.replace(/\s/g,"_")+"_"+a.replace(/\s/g,"_")),window.vkGoals.reach(a.toLowerCase().replace(/\s/g,"-")),window.facebookGoals.reach(a.toLowerCase().replace(/\s/g,"-"))}catch(s){window.console.warn(s)}}}function a(e,a){return function(o,s){var n=t(o).itemTypeForUrl,r=t(o).category;try{gaLoaded(function(){gaIterateTrackersNamePrefixes(function(t){n&&ga(t+"send","pageview",i+n+a),r&&ga(t+"send","event",r,e,s)})}),window.yandexGoals.reach(r.replace(/\s/g,"_")+"_"+e.replace(/\s/g,"_")),window.vkGoals.reach(e.toLowerCase().replace(/\s/g,"-")),window.facebookGoals.reach(e.toLowerCase().replace(/\s/g,"-"))}catch(c){window.console.warn(c)}}}var i="/_a_/";return{testingButtonClick:a("Testing button click","/testing-button-click"),searchDomainButtonClick:function(t){a("Search domain button click","/search-button-click")("domain",t)},addToCart:a("Add to cart","/add-to-cart"),removeFromCart:a("Remove from cart","/remove-from-cart"),orderButtonClick:e("order-button-click","Checkout","Order button click"),registrationButtonClickWithOrder:e("registration-button-click-with-order","Checkout","Registration button click with order"),registrationSuccess:e("registration-success","Lead","Registration success"),registrationWithOrderSuccess:e("registration-with-order-success","Checkout","Registration with order success"),registrationWithSharedHostingSuccess:e("registration-with-shared-hosting-success","Checkout","Registration with shared hosting success"),registrationWithVpsSuccess:e("registration-with-vps-success","Checkout","Registration with vps success"),registrationWithDomainSuccess:e("registration-with-domain-success","Checkout","Registration with domain success"),loginButtonClickWithOrder:e("login-button-click-with-order","Checkout","Login button click with order")}}(),$(document).on("click","[data-goal]",function(){var t=$(this),e=t.attr("href"),a=t.data("goal"),i=t.data("category")||"events";try{window.yandexGoals.reach(a),window.gaGoals.reach(i,a)}catch(o){window.console.error(o)}e&&(o.preventDefault(),setTimeout(function(){window.location.href=e},0))}),function(){window.dataLayer=window.dataLayer||[];var t={linux_hdd:"PHP Linux-хостинг",linux_ssd:"SSD Linux-хостинг",windows:"Windows-хостинг",bitrix:"1С-Битрикс",umi:"UMI",mail_hosting:"Почтовый хостинг",vps:"VPS",domain:"Домены",ssl:"SSL-сертификаты"},e=function(){function t(){e=[]}var e=[];return{addProducts:function(t){e=e.concat(t)},addImpressions:function(e){try{dataLayer.push({ecommerce:{impressions:e}}),t()}catch(a){window.console.warn(a.message)}},detail:function(){try{window.dataLayer.push({ecommerce:{detail:{products:e}}}),t()}catch(a){window.console.warn(a.message)}},addToCart:function(){try{window.dataLayer.push({ecommerce:{add:{products:e}}}),t()}catch(a){window.console.warn(a.message)}},removeFromCart:function(){try{window.dataLayer.push({ecommerce:{remove:{products:e}}}),t()}catch(a){window.console.warn(a.message)}},productClick:function(a){a=$.extend({list:"",href:""},a);try{dataLayer.push({event:"productClick",ecommerce:{click:{actionField:{list:a.list},products:e}},eventCallback:function(){a.href&&(document.location=a.href)}}),t()}catch(i){window.console.warn(i.message)}}}}();window.ecommerce=function(t,e){function a(){o=[]}function i(t){var e=Array.prototype.slice.call(arguments,1);s.forEach(function(a){a.hasOwnProperty(t)&&"function"==typeof a[t]&&a[t].apply(a,e)})}var o=[],s=[t];return{categories:e,addProducts:function(t){return o=o.concat(t),i("addProducts",o),this},addImpressions:function(t){return o=o.concat(t),i("addImpressions",o),this},detail:function(){return i("detail"),a(),this},addToCart:function(t){return i("addToCart",t),a(),this},removeFromCart:function(){return i("removeFromCart"),a(),this},productClick:function(t){return i("productClick",t),a(),this}}}(e,t)}(),function(){function t(t,i){t=t||$(document),i=i||$("[data-ec-product-list]",t),i.each(function(){e.call(this)}),o.length&&(window.ecommerce.addImpressions(o),a())}function e(){var t=$.extend({ecProductId:"",ecProductName:"",ecProductPrice:0,ecProductCategoryType:"",ecProductVariant:"",ecProductList:"",ecProductPosition:0},$(this).data());i.hasOwnProperty(t.ecProductList)||(i[t.ecProductList]=1),Number(t.ecProductPosition)>0&&(i[t.ecProductList]=t.ecProductPosition),$(this).data("ecProductPosition",i[t.ecProductList]),o.push({id:String(t.ecProductId),name:t.ecProductName,price:Number(t.ecProductPrice),category:window.ecommerce.categories[t.ecProductCategoryType]||"",variant:t.ecProductVariant,list:t.ecProductList,position:i[t.ecProductList]++})}function a(){i={},o=[]}var i={},o=[];$(document).on("click","[data-ec-product-link-id]",function(t){var i=$(this),s=i.data("ecProductLinkId"),n=i.data("ecProductLinkList"),r=i.attr("href"),c=$('[data-ec-product-id="'+s+'"][data-ec-product-list="'+n+'"]');return!c.length||(e.call(c[0]),!o.length||(window.ecommerce.addProducts(o).productClick({list:n,href:r}),a(),void(ga.loaded&&t.preventDefault())))}),$(function(){t()}),window.ecommerceProcessLists=t}(),Storage.prototype.setObj=function(t,e){return this.setItem(t,JSON.stringify(e))},Storage.prototype.getObj=function(t){return JSON.parse(this.getItem(t))};var App={};$(function(){App={init:function(){this.header(),this.ajaxCsrf(),this.faqTabs(),this.linkNoClick(),this.newsFixHeight(),this.partnerFixHeight(),this.tariffBlockMainFixHeight(),this.mailBusinessPartnerFixHeight()},ajaxCsrf:function(){$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}})},header:function(){function t(){var t=$(document).scrollTop();a<t?(e.addClass(o),i.addClass(s)):(e.removeClass(o),i.removeClass(s))}var e=$(".js-fixitbar"),a=e.offset().top,i=$(".header"),o="js-fixitbar_fix",s="fix";t(),$(window).scroll(function(){t()}),$(function(){var t=$(".background-menu");$(document).on("mouseover",".app__top-menu",function(){t.addClass("background-menu__show")}),$(document).on("mouseleave",".app__top-menu",function(){t.removeClass("background-menu__show")})}),$(function(){var t=$(".header-navbar__item"),e=$(".nav-link_sign-in");$(document).on("mouseover",".app__top-menu",function(){t.removeClass("open"),e.attr("aria-expanded","false")}),$(document).on("mouseleave",".dropdown-menu--header",function(){t.removeClass("open"),e.attr("aria-expanded","false")})}),$(function(){var t=$(".dd-panel-menu-controls .dropdown-menu__item"),e=$(".dd-panel-menu-controls .nav-link");e.each(function(){var t=$(this),e=t.attr("href"),a=!1;t.on("touchstart",function(){return a?(t.attr("href",e),void(a=!1)):(t.attr("href","javascript:void(0);"),void(a=!0))})}),$(".dd-panel-menu-wrap").on("click",function(t){t.stopPropagation()}),t.on("mouseenter click",function(){var e=$(this),a=e.parent().find(".dropdown-menu__item").index(this),i=e.closest(".dd-panel-menu-wrap");t.removeClass("dropdown-menu__item--hover"),e.addClass("dropdown-menu__item--hover"),i.find(".dd-panel-menu__item").removeClass("dd-panel-menu__item--active").eq(a).addClass("dd-panel-menu__item--active")})})},faqTabs:function(){if($(".faq__select").length){var t=$(".js-select");t.on("change",function(){$(t.val()).tab("show")});var e=$(".js-colbg");e.click(function(t){var e=$(this).parents(".faq__collapse-block")[0];$(e).toggleClass("anser_bg")}),$(".faq__select select").css("width","100%"),$(".faq__select select").select2({minimumResultsForSearch:1/0,placeholder:"Выберите вопрос"}),$(".faq__select select").on("select2:select",function(t){$(".faq__select .select2-container--default .select2-selection--single").css("background-color","rgba(255, 172, 99, 0.25)")})}},partnerFixHeight:function(){var t=$(".our-partners");t.length&&(t.parent().parent().setEqualHeights(".our-partners"),onWindowWidthResize(function(){t.parent().parent().setEqualHeights(".our-partners")}))},tariffBlockMainFixHeight:function(){var t=$(".switcher__contents");t.length&&(t.setEqualHeights(".prise__list"),onWindowWidthResize(function(){t.setEqualHeights(".prise__list")}))},newsFixHeight:function(){var t=$(".js-news");t.length&&(t.setEqualHeights(".js-news__item-text"),onWindowWidthResize(function(){t.setEqualHeights(".js-news__item-text")}))},mailBusinessPartnerFixHeight:function(){var t=$(".js-for-partners-block");t.length&&(t.setEqualHeights(".js-for-partners-block__title"),onWindowWidthResize(function(){t.setEqualHeights(".js-for-partners-block__title")}))},linkNoClick:function(){$(document).on("click",".js-no-link",function(t){t.preventDefault()})},showError:function(t,e,a){var i=this.getDanger(t);$(e+" .alert-danger").remove(),$(e+" "+a).after(i)},showSuccess:function(t,e,a){var i=this.getSuccess(t);$(e+" .alert-success").remove(),$(e+" "+a).after(i)},getDanger:function(t){return'<div class="alert alert-danger alert-dismissible text-xs-center" role="alert"><button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>'+t+"</div>"},getSuccess:function(t){return'<div class="alert alert-success alert-dismissible text-xs-center" role="alert"><button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>'+t+"</div>"}},App.init()}),$(function(){$(document).on("click",".js-toggle__trigger",function(t){t.preventDefault();var e=$(this),a=e.closest(".js-toggle__parent"),i=a.find(".js-toggle__block");i.is(":visible")?e.removeClass("toggle__trigger_active"):e.addClass("toggle__trigger_active"),i.slideToggle("fast")})}),$(document).on("click",".table-standart__summary",function(){var t=$(this),e=t.find(".table-standart__summary-arrow"),a=t.next(".table-standart__details"),i=a.hasClass("table-standart__details--open");e[i?"removeClass":"addClass"]("table-standart__summary-arrow--open"),a[i?"removeClass":"addClass"]("table-standart__details--open")}),$(document).on("show.bs.modal",".modal",function(){$(".cart").css("padding-right",$("body").data("scrollBarWidth")||0)}).on("hidden.bs.modal",".modal",function(){$(".cart").css("padding-right",0)}),$(function(){var t=document.createElement("div");t.className="modal-scrollbar-measure",document.body.appendChild(t),$("body").data("scrollBarWidth",t.offsetWidth-t.clientWidth),document.body.removeChild(t)}),$(function(){function t(t){var e=t.match(/[0-9]+\.?[0-9]*/g),a=0,i=!1,o=Number(e[0]),s=Number(e[1]),n=Number(e[2]),r=Number(e[3]);return e&&(a=(o+s+n)/3),(a>=230||r<.5)&&(i=!0),i}var e=".buy__btm, .pagination a.page-link, .modal__label, .list__label, .domainform__row, .domain__buy, .button";e+=", #UMIchooseSite #_UMIDesigns .umi-application-tabs .umi-tab",e+=", #UMIchooseSite #_UMIDesigns .umi-left-block a",e+=", #UMIchooseSite #_UMIDesigns .umi-search .umi-search-button",e+=", #fancybox-wrap .popup button";var a={wrapper:"c-material-ripple",container:"c-material-ripple__container",item:"c-material-ripple__item"},i=750,o=20,s={light:"rgba(255,255,255,.35)",dark:"rgba(0,0,0,.1)"};$(document).on("mousedown",e,function(e){var n=$(this),r=$('<span class="'+a.item+'">'),c=n.find("."+a.container);n.hasClass(a.wrapper)||n.addClass(a.wrapper),c.length||(n.append('<span class="'+a.container+'">'),c=n.find("."+a.container));var l={width:n.outerWidth(),height:n.outerHeight()},d=l.width>l.height?"width":"height",u=e.clientX-n.offset().left+$(window).scrollLeft(),m=e.clientY-n.offset().top+$(window).scrollTop(),h=l[d]/o,p=l[d]/2,f=l.width>l.height?u:m,_=1+Math.abs(p-f)/p,g=h*_,v=s.light;c.append(r),t(n.css("background-color"))&&(v=s.dark),r.css({top:m+"px",left:u+"px","background-color":v}),setTimeout(function(){r.css({transform:"scale("+g+")",opacity:0})},0),setTimeout(function(){r.remove()},i)})}),$(function(){$(document).on("click",".js-buy-button",function(t){var e=$(this).attr("href");t.preventDefault(),window.hosterAnalytics.orderButtonClick(),setTimeout(function(){document.location=e},0)})}),$(function(){function t(t,a){for(var i in a)a.hasOwnProperty(i)&&(t=t.replace("{{"+i+"}}",a[i]));return e(t)}function e(t){return encodeURI(t.replace(/({{\w*}})/g,""))}function a(t,e){window.open(t,"shareButton",i(e))}function i(t){var e={scrollbars:1,resizable:1,menubar:0,toolbar:0,status:0,left:(window.screen.availWidth-o[t].width)/2,top:(window.screen.availHeight-o[t].height)/2,width:o[t].width,height:o[t].height},a=[];for(var i in e)e.hasOwnProperty(i)&&a.push(i+"="+e[i]);return a.join(",")}$(document).on("click",".js-share-buttons__btn",function(e){e.preventDefault();var i=$(this),s=i.data("service"),n=t(o[s].urlTemplate,{url:i.data("url")||window.location.href.split("#")[0],title:i.data("title")||document.title});a(n,s)});var o={vkontakte:{urlTemplate:"http://vk.com/share.php?url={{url}}&title={{title}}&description={{description}}&image={{image}}",width:655,height:430},facebook:{urlTemplate:"https://www.facebook.com/sharer.php?src=sp&u={{url}}",width:800,height:520},"google-plus":{urlTemplate:"https://plus.google.com/share?url={{url}}",width:600,height:600},telegram:{urlTemplate:"https://telegram.me/share/url?url={{url}}&text={{title}}",width:600,height:600},evernote:{urlTemplate:"https://www.evernote.com/clip.action?title={{title}}&body=&url={{url}}",width:960,height:520}}}),$(function(){$(document).on("click",".js-faq-history-state-control",function(t,e){var a=$(this),i=a.data("state-href");e!==!0&&(window.history.state&&window.history.state.href===i||window.history.pushState({href:i,historyStateControl:!0},document.title,i))}),$(window).on("popstate",function(t){var e=t.originalEvent.state;if(e&&e.historyStateControl&&e.href){var a=$('[data-state-href="'+e.href+'"]'),i=a.data("state-click-stack");1===a.length&&(i&&(i=i.split(","),i.forEach(function(t){var e=$(t);1===e.length&&(e.hasClass("nav-link")||e.hasClass("collapsed"))&&e.trigger("click",!0)})),(a.hasClass("nav-link")||a.hasClass("collapsed"))&&a.trigger("click",!0))}})}),$(function(){var t=parseGetParameters().clickId;t&&sessionStorage.setItem("clickId",t),$("#check_promocode").on("click",function(t){$("#form-registr .promocode").parent().find(".alert").remove();var e=$("#promocode").val();$.ajax({url:"/promocode/check/"+e,dataType:"json"}).done(function(t){if(t&&(t.is_discount||t.is_partner)){if(t.is_discount){var a=t.price,i=Cart.getObject();t.rules.tariff&&t.rules.tariff.forEach(function(t){$.each(i.items,function(e,o){$.each(o,function(o,s){s.id!=t&&Number(t)!==-1||(i.items[e][o].discounts={promocode:[{discount:a,price_type:6}]})})})});var o=sessionStorage.getItem("clickId");o&&window.yandexGoals.reach("YAMONEY",{params:"clickid:"+o+";order:"+Date.now()+";order_amount:200;promocode:"+e+";type:1"}),Cart.setObject(i),Cart.update()}App.showSuccess("Промокод успешно применён, конечную стоимость заказа с учётом скидки можно будет увидеть в панели управления","#form-registr",".promocode")}else App.showError("Промокод не действителен","#form-registr",".promocode")}).fail(function(){App.showError("Промокод не действителен","#form-registr",".promocode")}),t.preventDefault()})}),$(function(){$(".alarm .messangers .info").click(function(){$(".messangers .tip").show(300)})}),$(function(){var t=$("[data-img-fallback]");t.each(function(t,e){document.documentElement.className.includes("no-webp")&&(e.src=e.getAttribute("data-img-fallback")),e.removeAttribute("data-img-fallback")})}),$(document).on("cart:list-opened",function(){$(".local-jivosite-btn").addClass("local-jivosite-btn--blur")}),$(document).on("cart:list-closed",function(){$(".local-jivosite-btn").removeClass("local-jivosite-btn--blur")}),$(function(){var t=document.querySelector(".embla-slider");if(t){var e=EmblaCarousel(t,{draggable:!0,loop:"true"===t.dataset.loop});$(".embla-slider__arrow--prev").click(e.scrollPrev),$(".embla-slider__arrow--next").click(e.scrollNext),e.on("select",function(){$(".embla-slider__arrows-current-slide-num").text(e.selectedScrollSnap()+1),$(".embla-slider__dot--active").removeClass("embla-slider__dot--active"),$("[data-embla-slider-dot="+e.selectedScrollSnap()+"]").addClass("embla-slider__dot--active")}),$("[data-embla-slider-dot]").click(function(){$(".embla-slider__dot--active").removeClass("embla-slider__dot--active"),$(this).addClass("embla-slider__dot--active"),e.scrollTo(+$(this).attr("data-embla-slider-dot"))})}}),$(".tabs .tabs__nav .tab-nav").click(function(){var t=$(this).prop("tabindex"),e=$(this).parent(),a=$(this).closest(".tabs").find(".tablist");e.find(".tab-nav").removeClass("active"),a.find(".tab").removeClass("active"),$(this).addClass("active"),a.find(".tab-"+t).addClass("active")}),$(document).on("click",".panel-gallery__image-wrap",function(){var t=$(this),e=t.data("index"),a=t.data("md-image"),i=t.data("caption"),o=t.closest(".panel-gallery__main").find(".panel-gallery__main-image-wrap"),s=o.find("img"),n=t.closest(".panel-gallery__images").find(".panel-gallery__image-wrap");n.removeClass("panel-gallery__image-wrap--active"),t.addClass("panel-gallery__image-wrap--active"),o.attr("data-photoswipe-index",e),s.attr("src",a);var r=t.closest(".panel-gallery").find(".panel-gallery__dot"),c=t.closest(".panel-gallery").find('.panel-gallery__dot[data-index="'+e+'"]');r.removeClass("panel-gallery__dot--active"),c.addClass("panel-gallery__dot--active");var l=t.closest(".panel-gallery").find(".panel-gallery__caption-text");l.text(i)}),$(document).on("click",".panel-gallery__dot",function(){var t=$(this),e=t.data("index"),a=t.closest(".panel-gallery").find('.panel-gallery__image-wrap[data-index="'+e+'"]');a.click()}),$(document).on("click",".reviews-slider__dot",function(){var t=$(this),e=t.data("index"),a=t.closest(".reviews-slider__footer").find(".reviews-slider__dot"),i=t.closest(".reviews-slider__footer").find('.reviews-slider__dot[data-index="'+e+'"]');a.removeClass("reviews-slider__dot--active"),i.addClass("reviews-slider__dot--active")}),$(function(){var t=$("#panel-gallery-main-image");if(t){var e=[{src:"/img/panel-gallery/img-01-lg.jpg",w:1400,h:840,title:"Заказ виртуального сервера (VDS/VPS)"},{src:"/img/panel-gallery/img-02-lg.jpg",w:1400,h:840,title:"Заказ сертификата SSL"},{src:"/img/panel-gallery/img-03-lg.jpg",w:1400,h:840,title:"Покупка домена"},{src:"/img/panel-gallery/img-04-lg.jpg",w:1400,h:840,title:"Корзина"}];t.data("gallery-items",JSON.stringify(e))}}),$(function(){var t={requestId:0,timeStart:(new Date).getTime(),ecPagePath:"",cacheKey:"",cartDomains:[],names:[],zones:[],pageTld:$("#search-domain-name").attr("data-page-tld"),tldDomains:[],domains:[],domainsResult:[],tlds:[],limit:10,countDomains:0,counterCheckFree:0,counterCheckStart:0,counterCheckEnd:0,counter:0,counterChunk:0,counterFirstView:0,counterMore:0,countDomainTld:0,countDomainHasRegistrar:0,countDomainHasAvailability:0,load:'<i class="ho ho-spinner ho-pulse" style="color:#F28C00;"></i>',selectLoadMoreStr:".btnmore .domain__more",selectTrStr:".domain__table tr:not(.disabled)",process:!1,searchButton:$("#search-domain-button"),searchName:$("#search-domain-name"),searchSynonyms:$(".search .search__synonyms"),domainInfo:$("#domain-info"),searchBlock:$(".search .search__result"),searchCopyright:$(".search__copyright"),searchPlaceholder:{"default":$("#search-domain-name").attr("placeholder"),error:"Имя должно быть больше 2-х символов",empty_zone:"Не забудьте указать доменную зону"},searchMessage:{start_search:"Мы начали поиск свободных доменов...",continue_search:"Мы продолжаем поиск свободных доменов...",continue_search_first_free:"Это нелегко, но мы в поиске первого свободного домена...",continue_search_free:"Это нелегко, но мы в поиске свободных доменов...",error:"К сожалению, свободные домены не найдены. Повторите поиск с другим ключевым словом."},searchMessageTld:{error:"Некорректный домен. Введите другую доменную зону, к примеру .RU, либо ключевое слово, <br>или взгляните на нашу подборку еще много интересных вариантов для Вас:",not_free:"Не расстраивайтесь! Мы подобрали для Вас еще много интересных вариантов:","default":"Мы подобрали для Вас еще много интересных вариантов:"},getParams:function(){if($(".tld-list").length){var t=this;this.zones=[],$(".tld-list input[type=checkbox]:checked").each(function(e,a){t.zones.push($(a).val())})}var e=Cart.getType("domain");return e&&(this.cartDomains=JSON.stringify(e)),{_token:$("meta[name=csrf-token]").attr("content"),names:this.names,zones:this.zones,pageTld:this.pageTld,cartDomains:this.cartDomains,pathname:window.location.pathname}},setDefault:function(){this.countDomains=0,this.zones=[]},setNames:function(t){this.countDomains=0,t=t||2;var e=this.searchName.val();return this.names=e.split(/,?\s/).filter(function(e){return e.length>t}),this.names},clickSearchButton:function(){var t=this,e=this.setNames(),a=this.getParams();return t.requestId=Date.now(),t.domainsResult=[],t.counter=0,t.counterChunk=0,t.counterCheckFree=0,t.counterFirstView=0,t.counterCheckStart=0,t.counterCheckEnd=1,t.counterMore=0,t.countDomainTld=0,t.countDomainHasRegistrar=0,t.countDomainHasAvailability=0,0===e.length?(this.searchName.val(""),this.searchName.attr("placeholder",t.searchPlaceholder.error),this.searchName.focus(),!1):(this.searchName.attr("placeholder",t.searchPlaceholder["default"]),t.searchButton.attr("disabled",!0),t.searchButton.html("<span>"+t.load+"</span>"),t.searchBlock.hide(),t.searchSynonyms.hide(),t.searchCopyright.hide(),window.hosterAnalytics.searchDomainButtonClick(e.join(" ")),void $.ajax({type:"POST",url:"/domains/search",data:a,dataType:"json",success:function(e){try{window.ecommerceProcessLists(null,$(e.html).find("[data-ec-product-list]"))}catch(a){console.warn(a.message)}t.searchBlock.html(e.html).hide().show(400),t.searchSynonyms.html(e.synonyms).hide().show(400),t.searchCopyright.hide().show(400),$(document).trigger("domainSearch:itemsInserted"),t.timeStart=(new Date).getTime(),t.ecPagePath=e.ecPagePath,t.cartDomains=e.cartDomains,t.cacheKey=e.cacheKey,t.countDomains=e.countDomains,t.domains=e.domains,t.tldDomains=e.tldDomains,t.checkSearchLogics()}}).always(function(){t.searchButton.removeAttr("disabled"),t.searchButton.html("<span>Проверить</span>"),t.process=!1,$(".search__synonyms__item").length<=10?$(".search__more__icon").hide():$(".search__more__icon").show()}))},checkSearchLogics:function(){var t=this,e=t.timeStart,a=(new Date).getTime(),i=t.limit,o=t.countDomains,s=t.names,n=t.tldDomains,r=0,c=$("ul.btnmore"),l=$(".search__result .loader");if(t.counter<=o)if(t.counterCheckFree<i)t.checkSearch(t.domains,t.counterCheckStart,t.counterCheckEnd,t.requestId),t.counterCheckFree<=5&&a-e>=15e3?(c.show(),$("a.domain__more").hide()):a-e>=1e4?t.counterCheckFree<1?$("div.search__result__text.message").show().html(t.searchMessage.continue_search_first_free):$("div.search__result__text.message").show().html(t.searchMessage.continue_search_free):a-e>=5e3&&(t.counterCheckFree<1?($("div.search__result__text.tld-message").hide(),$("div.search__result__text.message").show().html(t.searchMessage.start_search)):$("div.search__result__text.message").show().html(t.searchMessage.continue_search)),$.each(t.domainsResult.slice(t.counterFirstView-1,o),function(e,i){$.inArray(i.data.domain,s)!==-1||$.inArray(i.data.domain,n)!==-1?($(i.result).appendTo($("table.search__tld")).show(),t.countDomainTld++,0===i.data.availability&&t.countDomainHasAvailability++,i.data.registrar_id&&i.data.registrar_id.length>0&&t.countDomainHasRegistrar++):(1===i.data.availability&&(t.counterCheckFree++,t.timeStart=a),$(i.result).appendTo($("table.search__all")).show())}),"all"===$("#show-all:checked").val()?$("table.search__all tr.disabled").show():"free"===$("#show-free:checked").val()&&$("table.search__all tr.disabled").hide(),t.countDomainTld===s.length&&0===t.countDomainHasRegistrar&&t.counterCheckFree>0?$("div.search__result__text.tld-message").show().html(t.searchMessageTld.error):t.countDomainTld===s.length&&t.countDomainTld===t.countDomainHasAvailability&&t.counterCheckFree>0?$("div.search__result__text.tld-message").show().html(t.searchMessageTld.not_free):t.countDomainTld===s.length&&t.countDomainHasRegistrar>0&&t.countDomainTld>t.countDomainHasAvailability&&t.counterCheckFree>0&&$("div.search__result__text.tld-message").show().html(t.searchMessageTld["default"]),t.counterFirstView++,t.counterCheckStart++,t.counterCheckEnd++;else{for(r=0;r<3;r++)t.counterChunk<Math.ceil(o/(2*i))&&(t.counterChunk++,t.checkSearch(t.domains,t.counterCheckStart,t.counterCheckEnd,t.requestId),t.counterCheckFree===i?(t.counterCheckFree++,t.counterCheckStart++):t.counterCheckStart=t.counterCheckStart+2*i,t.counterCheckEnd=t.counterCheckEnd+2*i);$("div.search__result__text.message").hide().empty(),l.hide(),c.show(),$("a.domain__more").show()}else t.counter>=o&&0===t.counterCheckFree?(l.hide(),$("div.search__result__text.message").show().html(t.searchMessage.error)):t.counter>=o&&t.counterCheckFree>0&&t.counterCheckFree<i&&$("div.search__result__text.message").hide().empty()},checkSearch:function(t,e,a,i){var o=this,s={ecPagePath:o.ecPagePath,cartDomains:o.cartDomains,cacheKey:o.cacheKey,domains:t.slice(e,a)};$.post({url:"/domains/checkSearch",data:s,dataType:"json",success:function(t){i===o.requestId&&(o.counter=o.counterCheckEnd,$.each(t,function(t,e){o.domainsResult.push(e)}))}}).always(function(){i===o.requestId&&o.checkSearchLogics()})},clickDomainInfo:function(){var t=this,e=this.setNames()[0];return void 0===e?(this.searchName.val(""),this.searchName.attr("placeholder",t.searchPlaceholder.error),this.searchName.focus(),
$(".search-hide").slideUp(),$(".container__alarm").slideUp(),!1):void(e.indexOf(".")===-1?(this.searchName.val(""),this.searchName.attr("placeholder",t.searchPlaceholder.empty_zone),this.searchName.focus(),$(".search-hide").slideUp(),$(".container__alarm").slideUp()):(this.searchName.attr("placeholder",t.searchPlaceholder["default"]),t.domainInfo.attr("disabled",!0),$(".gangsta__info .button").removeAttr("disabled"),t.domainInfo.html("<span>"+t.load+"</span>"),$(".gangsta__dude").removeClass("angry-dude"),$(".gangsta__info .button").removeClass("prolong_whois"),$(".gangsta__info .button").removeClass("prolong_toCP"),$(".gangsta__info .button").off("click"),$(".notice_messengers").off("click"),$.post({url:"/domains/getInfo",data:{domain:e},success:function(e){console.log(e);var a,i,o,s,n,r="Домен не нужно<br> продлевать.<br> Тебе УДАЛОСЬ!";if(e===!1)i='<span class="gangsta_error_1">Ошибка</span>',o='<span class="gangsta_error_2">Невозможно получить данные о домене</span>',s=0,r="Похоже что-то <br> пошло не так <br> ХА-ХА!",n="Ошибка",$(".gangsta__info .button").attr("disabled",!0),$(".gangsta__dude").removeClass("angry-dude"),$(".search-hide").slideDown(),$(".container__alarm").slideUp();else if(e.find===!0)if(i="Домен зарегистрирован за вами до",o=e.expr,s=1,n="Продлить сейчас",$(".gangsta__dude").removeClass("angry-dude"),e.diff_full_days<60){e.diff_full_days<7?(a="#FF3E24",r="Еще немного...<br>Ты его<br> ПОТЕРЯЕШЬ!"):(a="#FFB172",r="Не хочешь<br> потерять домен? <br> ПРОДЛИ!"),$(".gangsta__info .button").addClass("prolong_toCP"),$(".gangsta__info .prolong_toCP").click(function(){window.location.href=""+e.link});var c=e.diff_h.toString().length<2?"0"+e.diff_h:""+e.diff_h,l=e.diff_d.toString().length<2?"0"+e.diff_d:""+e.diff_d,d=e.diff_m.toString().length<2?"0"+e.diff_m:""+e.diff_m;$(".alarm .clock .months").html('<div style="color: '+a+'">'+d[0]+'</div><div style="color: '+a+'">'+d[1]+"</div>"),$(".alarm .clock .days").html('<div style="color: '+a+'">'+l[0]+'</div><div style="color: '+a+'">'+l[1]+"</div>"),$(".alarm .clock .hours").html('<div style="color: '+a+'">'+c[0]+'</div><div style="color: '+a+'">'+c[1]+"</div>"),$(".search-hide").slideDown()}else a="#3D3E40",$(".gangsta__dude").addClass("angry-dude"),r="Домен не нужно<br> продлевать.<br> Тебе УДАЛОСЬ!",n="Продлевать не нужно",s=0,$(".gangsta__info .button").attr("disabled",!0),$(".container__alarm").slideUp(),$(".search-hide").slideDown();else e.find===!1&&(e.used===!0?(i="Домен занят",o=e.expr,s=0,r="Домен занят.. <br> Попробуй другой.<br>ДЕРЗАЙ!",n="WHOIS",$(".gangsta__info .button").addClass("prolong_whois"),$(".gangsta__info .prolong_whois").click(function(){$("#whoisLabel").text("Whois for "+e.name);var t=$("<pre>").text(e.info);$("#whois .modal-body").html(t),$("#whois").modal({backdrop:"static"})})):(i="",o='<span class="gangsta_free">Домен свободен!</span>',s=0,r="Домен свободен! <br> Захватим его <br> НЕ УПУСТИ!",n="Зарегистрировать",$(".gangsta__info .button").addClass("prolong_toCP"),$(".gangsta__info .prolong_toCP").click(function(){window.location.href="https://hoster.ru/domains?domain="+e.name})),$(".search-hide").slideDown(),$(".container__alarm").slideUp());$(".gangsta .gangsta__info p").html(i),$(".gangsta .period").html(o),$(".gangsta__notice").css("opacity",s),$(".gangsta__dude").css("opacity",1),$(".gangsta__dude span").html(r),$(".gangsta__info .button").text(n),t.domainInfo.removeAttr("disabled"),t.domainInfo.html("<span>Проверить</span>"),t.process=!1}})))},clickLoadMore:function(t,e){var a=this,i=a.domainsResult,o=a.limit,s=a.countDomains,n=$(".search__result .loader");0===a.counterMore&&(a.counterMore=a.counterFirstView),a.counterMore<s&&a.counterMore>=i.length?($("div.search__result__text.message").show().html(a.searchMessage.continue_search),n.show(),t.hide()):a.counterMore<=s&&a.counterMore<=i.length&&$.each(i.slice(a.counterMore,s),function(r,c){return e<o&&(a.counterMore++,1===c.data.availability&&e++,$(c.result).appendTo($("table.search__all")).show(),"all"===$("#show-all:checked").val()?$("table.search__all tr.disabled").show():"free"===$("#show-free:checked").val()&&$("table.search__all tr.disabled").hide(),a.counterMore>=s&&a.counterMore>=i.length&&($("div.search__result__text.message").hide().empty(),n.hide(),t.hide()),void 0)})},clickRadiobutton:function(t){var e=t.val();"all"===e?$("table.search__all tr.disabled").show():"free"===e&&$("table.search__all tr.disabled").hide()},clickWhois:function(t){$("#whoisLabel").text("Whois for "+t.data("name")),$.ajax({type:"POST",url:"/domains/whois",data:{name:t.data("name")},dataType:"json",success:function(t){var e=$("<pre>").text(t.html);$("#whois .modal-body").html(e),$("#whois").modal({backdrop:"static"})}})},renderDiscounts:function(){var t=[].slice.call(this.searchBlock.find("tr[data-cart-add]")),e=Cart.getAllApplicableDiscounts();t.length&&(e.hasOwnProperty("domain")&&e.domain.length&&e.domain.forEach(function(e){t.slice().forEach(function(a){var i=$(a),o=i.data("cart-tld");if(!e.hasOwnProperty("tlds")||!e.tlds.length||e.tlds.indexOf(o)!==-1){var s=i.find(".js-cost");if(s.length){var n=Number(i.data("cart-cost")),r=Math.round(n-n*e.discount_value);n!==r&&(s.html(r+' <span class="ho ho-rouble"></span><br><span class="old-price">'+n+' <span class="ho ho-rouble"></span></span>'),t=t.filter(function(t){return t!==a}))}}})}),t.forEach(function(t){var e=$(t),a=e.find(".js-cost"),i=Number(e.data("cart-cost"));a.html(i+' <span class="ho ho-rouble"></span>')}))},getUrlDomain:function(t){var e=window.location.search;return e=e.match(new RegExp(t+"=([^&=]+)")),!!e&&e[1]},clickSynonym:function(t){this.searchName.val(t),this.clickSearchButton()},init:function(){var t=this;this.searchButton.on("click",function(){t.process=!0,t.setDefault(),t.clickSearchButton()}),0!=this.getUrlDomain("domain")&&(this.searchName.val(this.getUrlDomain("domain")),setTimeout(function(){t.searchButton.trigger("click")},100)),this.domainInfo.on("click",function(){t.process=!0,t.setDefault(),t.clickDomainInfo()}),this.searchName.keypress(function(e){var a=e.which;if(13==a&&!t.process)return t.searchButton.trigger("click"),t.domainInfo.trigger("click"),!1}),$(document).on("click",t.selectLoadMoreStr,function(){t.clickLoadMore($(this),0)}),$(document).on("click",t.selectTrStr,function(t){t.preventDefault(),$(this).toggleClass("checked")}),$(document).on("click","#show-all, #show-free",function(){t.clickRadiobutton($(this))}),$(document).on("click",".domain__table .whois",function(){t.clickWhois($(this))}),$(document).on("click",".search__synonyms__item",function(){var e=$(this).text();t.clickSynonym(e)}),$(document).on("click",".search__more__icon",function(){$(this).toggleClass("search__active"),$(".search__synonyms__item").toggleClass("open")}),$(document).on("cart:updated domainSearch:itemsInserted",this.renderDiscounts.bind(this))}};t.init()});var Tariff={};!function(){$(function(){Tariff={name:"Tariff",storageDataVersion:33,allowTypes:["vps","linux_hdd","linux_ssd","bitrix","umi","windows","mail_hosting","bot_protection","ddos_protection","ispmanager","solution"],getObject:function(){var t=sessionStorage.getObj(this.name),e=this.isStorageDataVersionChanged(t);return e&&(this.setDefault(),t=sessionStorage.getObj(this.name)),t},setDefault:function(){this.setObject({})},setObject:function(t){t._storageDataVersion=this.storageDataVersion,sessionStorage.setObj(this.name,t)},isStorageDataVersionChanged:function(t){return!t||t._storageDataVersion!==this.storageDataVersion},getType:function(t){return this.getObject()[t]},init:function(){var t=this,e=this.getObject(),a=[];$.each(this.allowTypes,function(t,i){e[i]||a.push(i)}),a.length&&$.post("/load/types",{types:a,lines:{vps:["","vds_ssd_openvz","vds_ssd_kvm","vds_openstack_hdd","vds_openstack_ssd","vds_openstack_win_ssd","vds_openstack_custom"],linux_ssd:["shared_ssd","ihor_ssd"]}},function(a){$.each(a,function(t,a){e[t]=a}),t.setObject(e)})}},Tariff.init()})}();var Cart={};!function(){$(function(){Cart={button:$(".js-modal-buy-button"),footer:$(".footer"),cart:$(".cart"),cartContent:$(".cart__content"),itemCount:$(".cart__bage"),itemTotal:$(".cart__total"),name:"Cart",cartExpirationTime:2592e6,storageDataVersion:31,getObject:function(){var t=localStorage.getObj(this.name),e=this.isCartExpired(t),a=this.isStorageDataVersionChanged(t);return(e||a)&&(this.setDefault(),t=localStorage.getObj(this.name)),t},setObject:function(t){t._storageDataVersion=this.storageDataVersion,t._timestamp=Date.now(),localStorage.setObj(this.name,t)},isCartExpired:function(t){return!(!t||void 0===t._timestamp)&&Date.now()-t._timestamp>this.cartExpirationTime},isStorageDataVersionChanged:function(t){return!t||t._storageDataVersion!==this.storageDataVersion},getType:function(t){return this.getObject().items[t]},setDefault:function(){this.setObject({cartId:0,total:0,count:0,items:{vps:{},windows:{},linux_hdd:{},linux_ssd:{},bitrix:{},umi:{},domain:{},mail_hosting:{},bot_protection:{},ddos_protection:{},ispmanager:{},solution:{}}})},clear:function(){this.setDefault(),this.update()},start:function(){var t=this;this.getObject(),t.cartScroll(),$(document).scroll(function(){t.cartScroll()}),$(window).resize(function(){t.cartScroll()}),t.cartContent.scrollbar(),$(".js-Cartall").click(function(e){e.preventDefault();var a=!t.cartContent.hasClass("openBD");$(document).trigger(a?"cart:list-opened":"cart:list-closed"),t.cartContent[a?"addClass":"removeClass"]("openBD")})},cartScroll:function(){var t=window.pageYOffset||document.documentElement.scrollTop,e=this.footer.offset().top,a=t+$(window).height(),i=a-e;i>=0?this.cart.css({position:"absolute",bottom:"-71px"}):this.cart.css({position:"fixed",bottom:"0px"})},getOptions:function(t,e,a,i){var o={};switch(e){case"domain":o={tld:t.attr("data-cart-tld")};break;case"linux_hdd":case"linux_ssd":o={php_version:t.attr("data-php-version")||$("#linux-modal [name=phpversion]").val()};break;case"vps":t.attr("data-react-component")?o=JSON.parse(t.attr("data-options")):(o={template:$("#"+e+"-modal select[name=template]").val(),isp:{id:$("#"+e+"-modal select[name=isp]").val(),cost:$("#"+e+"-modal select[name=isp] option:selected").data("cost")?$("#"+e+"-modal select[name=isp] option:selected").data("cost"):0,name:$("#"+e+"-modal select[name=isp] option:selected").data("name")?$("#"+e+"-modal select[name=isp] option:selected").data("name"):""},ip:{count:parseInt($("#"+e+"-modal input[name=ip]").val()),cost:parseFloat($("#"+e+"-modal .ip-total").text())},apps:[]},$("#"+e+"-modal .apps-vps-list input:checkbox:checked").each(function(t,e){o.apps.push($(e).attr("name"))}));break;case"umi":case"bitrix":o={php_version:$("#"+e+"-modal select[name=free-linux-php]").val(),tariff:$("#"+e+"-modal select[name=free-linux]").val(),desc:$("#"+e+"-modal select[name=free-linux] option:selected").attr("data-name")+" PHP"+$("#"+e+"-modal select[name=free-linux-php]").val()};break;case"solution":o=6!=a?{php_version:$("#"+e+"-modal select[name=free-linux-php]").val(),tariff:$("#"+e+"-modal select[name=free-linux]").val(),desc:$("#"+e+"-modal select[name=free-linux] option:selected").attr("data-name")+" PHP"+$("#"+e+"-modal select[name=free-linux-php]").val()}:{vps:$("#"+e+"-modal select[name=name-vps]").val(),isp:$("#"+e+"-modal select[name=isp]").val(),template:$("#"+e+"-modal select[name=template]").val(),desc:"VPS - "+$("#"+e+"-modal select[name=name-vps] option:selected").text()+" ISP - "+$("#"+e+"-modal select[name=isp] option:selected").text()+" Шаблон - "+$("#"+e+"-modal select[name=template] option:selected").text()};break;case"mail_hosting":o={domains:function(){var t=[];return $("#"+e+"-modal .js-domain-list__item").each(function(){t.push($(this).data("domain"))}),t}()}}return o},delCart:function(t){var e=this.getObject(),a=t.attr("data-cart-type"),i=t.attr("data-cart-remove-id");if(window.hosterAnalytics.removeFromCart(a,e.items[a][i].name),function(){var o={id:e.items[a][i].id,name:e.items[a][i].name,variant:e.items[a][i].name,category:window.ecommerce.categories[a]||"",quantity:1,price:parseFloat(e.items[a][i].cost),list:"",position:null};e.items[a][i].ecData&&(o.list=e.items[a][i].ecData.ecProductList,o.position=e.items[a][i].ecData.ecProductPosition),o.name.indexOf("(")&&(o.name=$.trim(o.name.split("(")[0]));var s=t.closest(".cart__fleist").find(".cart__timelong").text();s&&(o.variant+=" ("+s+")"),"domain"==a&&(o.id=o.name=o.name.split(".").slice(1).join("."),"подарок"==s&&(o.price=0)),"umi"==a&&(o.id=a+"_"+o.id),window.ecommerce.addProducts([o]).removeFromCart()}(),delete e.items[a][i],$("[data-cart-id="+i+"]").remove(),"domain"==a)if(t.hasClass("cart__tab")){var o=$("[data-cart-remove-id="+i+"]");o.attr("data-cart-remove-id",null),o.attr("data-cart-add",1),o.removeClass("checked")}else t.attr("data-cart-remove-id",null),t.attr("data-cart-add",1);this.setObject(e),this.update()},addCart:function(t){t=$(t);var e="",a=t.is("[data-id]")?t.attr("data-id"):0,i=t.attr("data-cart-type"),o=t.is("[data-cart-period]")?t.attr("data-cart-period"):1,s=t.attr("data-cms-name")||"none",n=t.attr("data-cms-version")||"",r=this.getOptions(t,i,a,o),c=this.getObject(),l={},d={},u=t.data(),m=parseInt(t.attr("data-licence-id"));if("domain"===i)var h=t.attr("data-cart-cost"),p=t.attr("data-cart-name");else{var f=Tariff.getType(i)[a],_="";if("solution"===i){var g=f.title;if(m)var p=f.licence[m].title,h=f.licence[m].cost}else var p=f.name_ru,h=parseFloat(f.periods[o].cost);switch(f.free_domain_count&&(l={domain:{period:12,count:f.free_domain_count}}),"object"==typeof f.discounts&&null!==f.discounts&&Object.keys(f.discounts).length&&(d=f.discounts),i){case"vps":if(_=[],t.attr("data-react-component")){if(!r.template)return!1}else if(!$("#"+i+"-modal select[name=template]").val())return App.showError("Необходимо выбрать шаблон!","#"+i+"-modal",".modal-body"),!1;Object.keys(r).forEach(function(t){if("apps"!==t&&"template"!==t&&"settings"!==t)r[t].cost>0&&("ip"===t?_.push("IP-"+r[t].count):_.push(r[t].name+""),h+=o*r[t].cost);else if("apps"===t&&r.apps.length){var e=[{title:"Django",value:"django"},{title:"Docker",value:"docker"},{title:"Jitsi Meet",value:"jitsimeet"},{title:"Node.JS",value:"nodejs"},{title:"LAMP",value:"lamp"},{title:"LEMP",value:"lemp"},{title:"BitrixVM",value:"bitrixvm"},{title:"Fastpanel",value:"fastpanel"},{title:"Brainy CP",value:"brainycp"},{title:"Vesta",value:"vesta"},{title:"Без приложения",value:"none"}];$(e).each(function(t,e){e.value===r.apps[0]&&_.push(e.title)})}}),t.attr("data-custom-vds-configurator")&&(h=+t.attr("data-price")),_.length&&(p=p+" ("+_.join(", ")+")");break;case"linux_hdd":case"linux_ssd":p+=r.php_version?" ("+r.php_version+")":"";break;case"umi":if(!$("#"+i+"-modal select[name=free-linux]").val())return App.showError("Необходимо выбрать тариф!","#"+i+"-modal",".modal-body"),!1;if(!$("#"+i+"-modal select[name=free-linux-php]").val())return App.showError("Не выбрана версия PHP!","#"+i+"-modal",".modal-body"),!1;if(!$("#"+i+"-modal input[name=oferta]").is(":checked"))return App.showError("Не подтвердили оферту","#"+i+"-modal",".modal-body"),!1;p+=" (PHP"+r.php_version+")";break;case"bitrix":if(!$("#"+i+"-modal select[name=free-linux]").val())return App.showError("Необходимо выбрать тариф!","#"+i+"-modal",".modal-body"),!1;if(!$("#"+i+"-modal select[name=free-linux-php]").val())return App.showError("Не выбрана версия PHP!","#"+i+"-modal",".modal-body"),!1;if(!$("#"+i+"-modal input[name=oferta]").is(":checked"))return App.showError("Не подтвердили оферту","#"+i+"-modal",".modal-body"),!1;p+=" (PHP"+r.php_version+")";break;case"solution":if(!$("#"+i+"-modal select[name=name-licences]").val())return App.showError("Необходимо выбрать лицензию!","#"+i+"-modal",".modal-body"),!1;if(!$("#"+i+"-modal input[name=oferta]").is(":checked"))return App.showError("Не подтвердили оферту","#"+i+"-modal",".modal-body"),!1;if(6!=a){if(!$("#"+i+"-modal select[name=free-linux]").val())return App.showError("Необходимо выбрать тариф!","#"+i+"-modal",".modal-body"),!1;if(!$("#"+i+"-modal select[name=free-linux-php]").val())return App.showError("Не выбрана версия PHP!","#"+i+"-modal",".modal-body"),!1;p=g+" - Лицензия "+p+" (PHP"+r.php_version+")"}else{if(!$("#"+i+"-modal select[name=name-vps]").val())return App.showError("Необходимо выбрать VPS!","#"+i+"-modal",".modal-body"),!1;if(!$("#"+i+"-modal select[name=isp]").val())return App.showError("Не выбрана панель управления ISP!","#"+i+"-modal",".modal-body"),!1;if(!$("#"+i+"-modal select[name=template]").val())return App.showError("Не выбран шаблон операционной системы!","#"+i+"-modal",".modal-body"),!1;p=g+" - Лицензия "+p}break;case"mail_hosting":if(!r.domains.length)return App.showError("Необходимо указать хотя бы один домен!","#"+i+"-modal",".modal-body"),!1;p+=" (Кол-во доменов: "+r.domains.length+")"}}switch(c.cartId+=1,void 0===c.items[i]&&(c.items[i]={}),c.items[i][c.cartId]={id:a,cartId:c.cartId,period:o,preinstall_cms:s,preinstall_cms_version:n,name:p,cost:h,options:r,free:l,discounts:d},c.items[i][c.cartId].ecData={ecProductList:"",ecProductPosition:null},u.hasOwnProperty("ecProductList")&&(c.items[i][c.cartId].ecData.ecProductList=u.ecProductList),u.hasOwnProperty("ecProductPosition")&&(c.items[i][c.cartId].ecData.ecProductPosition=u.ecProductPosition),i){case"domain":t.attr("data-cart-remove-id",c.cartId),t.attr("data-cart-add",0),e='<ul class="cart__fleist"  data-cart-type="'+i+'" data-cart-id="'+c.cartId+'"><li>'+p+'</li><li class="cart__period"><span class="cart__timelong">'+o+' г.</span></li><li><span class="cart__cost">'+(h%1>0?h.toFixed(2):h)+'</span> <span class="ho ho-rouble"></span><span class="cart__tab" title="Удалить" data-cart-remove-id="'+c.cartId+'" data-cart-type="'+i+'"><i class="ho ho-remove"></i></span></li></ul>';break;case"umi":case"bitrix":case"solution":e='<ul class="cart__fleist"  data-cart-type="'+i+'" data-cart-id="'+c.cartId+'"><li>'+p+'</li><li class="cart__period"><span class="cart__timelong">'+o+' г.</span></li><li><span class="cart__cost">'+(h%1>0?h.toFixed(2):h)+'</span> <span class="ho ho-rouble"></span><span class="cart__tab" title="Удалить" data-cart-remove-id="'+c.cartId+'" data-cart-type="'+i+'"><i class="ho ho-remove"></i></span></li></ul>';break;case"vps":case"linux_hdd":case"linux_ssd":case"windows":case"mail_hosting":case"bot_protection":case"ddos_protection":case"ispmanager":var v='<li class="cart__period"><span class="cart__tab minus"><i class="ho ho-minus"></i></span><span class="cart__timelong"><span class="cart__period_text">'+o+'</span> мес.</span><span class="cart__tab plus"><i class="ho ho-plus"></i></span></li>';t.attr("data-custom-vds-configurator")&&(v=""),e='<ul class="cart__fleist"  data-cart-type="'+i+'" data-cart-id="'+c.cartId+'"><li>'+p+"</li>"+v+'<li><span class="cart__cost">'+(h%1>0?h.toFixed(2):h)+'</span> <span class="ho ho-rouble"></span><span class="cart__tab" title="Удалить" data-cart-remove-id="'+c.cartId+'" data-cart-type="'+i+'"><i class="ho ho-remove"></i></span></li></ul>'}this.setObject(c),this.cartContent.prepend(e),this.update(),window.hosterAnalytics.addToCart(i,c.items[i][c.cartId].name),function(){var t={id:c.items[i][c.cartId].id,name:c.items[i][c.cartId].name,variant:c.items[i][c.cartId].name,category:window.ecommerce.categories[i]||"",quantity:1,price:parseFloat($("ul[data-cart-id="+c.cartId+"] span.cart__cost").text()),list:c.items[i][c.cartId].ecData.ecProductList,position:c.items[i][c.cartId].ecData.ecProductPosition};t.name.indexOf("(")&&(t.name=$.trim(t.name.split("(")[0])),"domain"==i&&(t.id=t.name=p.split(".").slice(1).join(".")),"umi"==i&&(t.id=i+"_"+t.id);var e=$("ul[data-cart-id="+c.cartId+"] span.cart__timelong").text();e&&(t.variant+=" ("+e+")"),window.ecommerce.addProducts(t).addToCart({list:c.items[i][c.cartId].ecData.ecProductList})}(),"linux_hdd"===i||"linux_ssd"===i?$("#linux-modal").modal("hide"):"vps"!==i&&"bitrix"!==i&&"umi"!==i&&"mail_hosting"!==i&&"solution"!==i||$("#"+i+"-modal").modal("hide")},update:function(){var t=this.getObject(),e=Cart.getAllApplicableDiscounts();t.count=0,t.total=0,$.each(t.items,function(e,a){$.isEmptyObject(a)||$.each(a,function(e,a){t.count+=1,t.total+=parseFloat(a.cost)})}),$.isEmptyObject(t.items.domain)||$.each(t.items.domain,function(a,i){var o=Number(i.cost),s=o,n="1 г.",r=!1;$.isEmptyObject(e.domain)||$.each(e.domain,function(e,a){if(!r&&0!==a.amount){var c=i.options.tld;if(!a.hasOwnProperty("tlds")||!a.tlds.length||a.tlds.indexOf(c)!==-1){var l=Number(a.discount_value),d=o*l,u=o-d,m=100*l;0!==d&&(s=u,d>0&&(n='1 г. <span class="i-highlight">(-'+m+"%)</span>"),0===u&&(n='<span class="i-highlight">подарок</span>'),t.total-=d,a.amount--,r=!0)}}}),$("ul[data-cart-id="+i.cartId+"] span.cart__cost").text(s%1>0?s.toFixed(2):s),$("ul[data-cart-id="+i.cartId+"] span.cart__timelong").html(n)}),this.setObject(t),$(document).trigger("cart:updated"),this.itemCount.text(t.count),this.itemTotal.text(t.total%1>0?t.total.toFixed(2):t.total),t.count>0?(this.cart.prev("div").hasClass("i-pb60")||this.cart.prev("div").addClass("i-pb60"),this.cart.show()):(this.cart.prev("div").hasClass("i-pb60")&&this.cart.prev("div").removeClass("i-pb60"),this.cart.hide())},clickButtons:function(){var t=this;$(document).on("click","[data-cart-add=1]",function(e){e.preventDefault(),t.addCart($(this))}),$(document).on("click","[data-cart-remove-id]",function(e){e.preventDefault(),t.delCart($(this))}),$(document).on("click",".cart .cart__period .cart__tab",function(e){e.preventDefault(),t.oneMore($(this))})},oneMore:function(t){var e=this.getObject(),a=t.parent().parent("ul"),i=a.attr("data-cart-type"),o=parseInt(a.attr("data-cart-id")),s=parseInt(a.find(".cart__period_text").text()),n=s,r=s,c=e.items[i][o],l=c.id,d=!1,u=Tariff.getType(i);switch(i){case"vps":case"linux_hdd":case"linux_ssd":case"windows":case"mail_hosting":case"bot_protection":case"ddos_protection":case"ispmanager":var m=u[l],h="",p=null;if($.each(m.periods,function(t,e){return t<s?void(n=t):t>r?(r=t,!1):void 0}),t.hasClass("minus")){if(n<s){var f=n;d=!0}}else if(r>s){var f=r;d=!0}if(d){window.hosterAnalytics.removeFromCart(i,e.items[i][o].name),function(){var t={id:e.items[i][o].id,name:e.items[i][o].name,variant:e.items[i][o].name,category:window.ecommerce.categories[i]||"",quantity:1,price:parseFloat(a.find(".cart__cost").text()),list:"",position:null};e.items[i][o].ecData&&(h=t.list=e.items[i][o].ecData.ecProductList,p=t.position=e.items[i][o].ecData.ecProductPosition),"umi"==i&&(t.id=i+"_"+t.id),t.name.indexOf("(")&&(t.name=$.trim(t.name.split("(")[0]));var s=a.find(".cart__timelong").text();s&&(t.variant+=" ("+s+")"),window.ecommerce.addProducts([t]).removeFromCart()}();var _=parseFloat(m.periods[f].cost);"vps"===i?Object.keys(e.items[i][o].options).forEach(function(t){"apps"!==t&&"template"!==t&&(_+=f*e.items[i][o].options[t].cost)}):"mail_hosting"==i&&(_*=e.items[i][o].options.domains.length),a.find(".cart__period_text").text(f),a.find(".cart__cost").text(_%1>0?_.toFixed(2):_),e.items[i][o].period=f,e.items[i][o].cost=_}}d&&(this.setObject(e),this.update(),window.hosterAnalytics.addToCart(i,e.items[i][o].name),function(){var t={id:e.items[i][o].id,name:e.items[i][o].name,variant:e.items[i][o].name,category:window.ecommerce.categories[i]||"",quantity:1,price:parseFloat(a.find(".cart__cost").text()),list:h,position:p};e.items[i][o].ecData||(e.items[i][o].ecData={}),e.items[i][o].ecData.ecProductList=h,e.items[i][o].ecData.ecProductPosition=p,"umi"==i&&(t.id=i+"_"+t.id),t.name.indexOf("(")&&(t.name=$.trim(t.name.split("(")[0]));var s=a.find(".cart__timelong").text();s&&(t.variant+=" ("+s+")"),window.ecommerce.addProducts([t]).addToCart()}())},load:function(){if(this.getObject().total>0){var t="",e=this.getObject();$.each(e.items,function(e,a){$.isEmptyObject(a)||$.each(a,function(a,i){switch(e){case"umi":case"domain":case"bitrix":case"solution":t+='<ul class="cart__fleist" data-cart-type="'+e+'" data-cart-id="'+i.cartId+'"><li>'+i.name+'</li><li class="cart__period"><span class="cart__timelong">'+i.period+' г.</span></li><li><span class="cart__cost">'+(i.cost%1>0?i.cost.toFixed(2):i.cost)+'</span> <span class="ho ho-rouble"></span><span class="cart__tab" title="Удалить" data-cart-remove-id="'+i.cartId+'" data-cart-type="'+e+'"><i class="ho ho-remove"></i></span></li></ul>';break;case"vps":case"linux_hdd":case"linux_ssd":case"windows":case"mail_hosting":case"bot_protection":case"ddos_protection":case"ispmanager":var o='<li class="cart__period"><span class="cart__tab minus"><i class="ho ho-minus"></i></span><span class="cart__timelong"><span class="cart__period_text">'+i.period+'</span> мес.</span><span class="cart__tab plus"><i class="ho ho-plus"></i></span></li>',s=[31375312,31375313,31375314];s.indexOf(+i.id)!==-1&&(o=""),t+='<ul class="cart__fleist"  data-cart-type="'+e+'" data-cart-id="'+i.cartId+'"><li>'+i.name+"</li>"+o+'<li><span class="cart__cost">'+(i.cost%1>0?i.cost.toFixed(2):i.cost)+'</span> <span class="ho ho-rouble"></span><span class="cart__tab" title="Удалить" data-cart-remove-id="'+i.cartId+'" data-cart-type="'+e+'"><i class="ho ho-remove"></i></span></li></ul>'}})}),t&&this.cartContent.prepend(t),this.update()}},isDiscountApplicable:function(t,e){var a=!0;return e.hasOwnProperty("min_period")&&Number(t.period)<Number(e.min_period)&&(a=!1),e.hasOwnProperty("amount")&&Number(t.amount)<1&&(a=!1),a},getItemApplicableDiscounts:function(t){var e=this,a={};if($.isEmptyObject(t.discounts)||$.each(t.discounts,function(i,o){a.hasOwnProperty(i)||(a[i]=[]),o.forEach(function(o){e.isDiscountApplicable(t,o)&&a[i].push(o)})}),t.free&&t.free.hasOwnProperty("domain")){a.hasOwnProperty("domain")||(a.domain=[]);var i={discount_value:1,amount:t.free.domain.count,min_period:t.free.domain.period,tlds:["ru","xn--p1ai"]};e.isDiscountApplicable(t,i)&&a.domain.push(i)}return a},getAllApplicableDiscounts:function(){var t=this,e=this.getObject().items,a={};return $.each(e,function(e,i){$.isEmptyObject(i)||$.each(i,function(e,i){$.each(t.getItemApplicableDiscounts(i),function(t,e){a.hasOwnProperty(t)||(a[t]=[]),a[t]=a[t].concat(e)})})}),$.each(a,function(t,e){a[t]=e.sort(function(t,e){return e.discount_value-t.discount_value})}),a},init:function(){this.start(),this.load(),this.clickButtons()}},Cart.init()})}(),$("#dig-form").submit(function(t){t.preventDefault();var e=$(this),a=$("#dig_container");a.empty(),$.ajax({type:e.attr("method"),url:e.attr("action"),data:e.serialize()}).done(function(t){"undefined"!=typeof t.render&&a.html(t.render)})}),function(){$(function(){var t={button:$(".js-modal-buy-button"),tariff:null,tariffType:null,ecommerceData:{},vpsTemplates:null,init:function(){function e(t){var e="none";$("#vps-modal .apps-vps-block").css("display",e),$("#vps-modal .apps-vps-list").html(""),$(t).each(function(t,e){if("ssd_kvm"===a.vpsType||"ssd_ovz"===a.vpsType){var i=e.info.substr(0,e.info.indexOf("for"))+" "+e.version;$("#vps-modal .apps-vps-list").append('<div class="variant"><input class="form-check-input checkbox_common" id="vps-app_'+e.name+'" type="checkbox" name="'+e.name+'"><label for="vps-app_'+e.name+'" class="form-check-label">'+i+"</label></div>")}});var i=$('.select-isp [name="isp"] option:selected').val();6515535!=i&&32168229!=i||$("#vps-app_ispmgr5").prop({disabled:!0,checked:!0})}var a=this;$(document).on("click","a[data-tariff-modal]",function(t){t.preventDefault();var e=$(this).attr("data-id"),i=$(this).attr("data-type"),o=$(this).attr("data-linux-tariff-for-bitrix"),s=$(this).attr("data-licence-id"),n=$(this).attr("data-vps-type");a.extractEcommerceData($(this)),a.selectedLinuxTariffForBitrix=o,a.idLicence=s,a.tariffType=i,a.vpsType=n,a.tariff=Tariff.getType(i)[e],a.licenceName=$(this).attr("data-licence-name"),a.cms_name=$(this).attr("data-cms-name")||"none",a.bitrixLineHosting=Tariff.getType("bitrix"),a.vpsLine=Tariff.getType("vps"),a.showModal(),window.hosterAnalytics.testingButtonClick(a.tariff.tariff_type,a.tariff.title)}),$(document).on("click",".modal .modal-content input[name=period]",function(){a.changePeriod($(this))}),this.initDomainAdd(),$(document).on("click",".js-suggestion-btn",function(){var t=$(this).closest(".modal").find(".js-modal-buy-button");t.click()}),$(document).on("modalTariff:periodChanged modalTariff:vpsTemplateChanged",function(){var t=a.button.attr("data-cart-period");a.renderSuggestionsBlock({period:t})}),$(document).on("modalTariff:vpsTemplateChanged",function i(){i.cache||(i.cache={});var t=$('.select-templates [name="template"]').val();return i.cache[t]?e(i.cache[t]):void $.ajax({type:"get",url:"/vpsGetApps?template_id="+t,success:function(a){i.cache[t]=a,e(a)}})}),$(document).on("change",'.select-templates [name="template"]',function(t){$(document).trigger("modalTariff:vpsTemplateChanged")}),$(document).on("change",'.select-isp [name="isp"]',function(){var e,a=$('.select-isp [name="isp"] option:selected').val();0==a?e="":6515535==a||32168229==a?e="ispmgr5":7577338==a&&(e="ispmanager");var i="<option></option>";$.each(t.vpsTemplates,function(t,e){var a=e.template;a.substr(1+a.lastIndexOf("-"));i+='<option value="'+e.id+'">'+e.info+"</option>",$(".select-templates select").html(i).change()}),$('.select-templates [name="template"]').select2({minimumResultsForSearch:1/0,placeholder:"Шаблон не выбран"})}),$(".modal").on("select2:select",'[name="preinstall_cms"]',function(t){a.button.attr("data-cms-name",t.target.value)})},changePeriod:function(t){var e=this,a=parseInt(t.val()),i=this.tariff.periods[a];switch(this.tariffType){case"linux_hdd":case"linux_ssd":$("#linux-modal .price__item__tariff .js-value").text(i.cost_month%1>0?i.cost_month.toFixed(2):i.cost_month),$("#linux-modal .price__item__total .js-value").text(i.cost%1>0?i.cost.toFixed(2):i.cost),parseInt(i.rate)>0?$("#linux-modal .price__item__econom .js-value").text(this.priceToString(this.getRateSum(i))):$("#linux-modal .price__item__econom .js-value").text("0");break;case"vps":var o=i.cost,s=parseInt($(".select-isp select").val());s>0&&(o+=parseFloat($(".select-isp select option[value="+s+"]").attr("data-cost"))*a);var n=parseInt($(".select-ip input[name=ip]").val());n>0&&(o+=a*n*parseFloat($(".select-ip input[name=ip]").attr("data-cost"))),$("#"+e.tariffType+"-modal .price__item__tariff .js-value").text(i.cost_month%1>0?i.cost_month.toFixed(2):i.cost_month),$("#"+e.tariffType+"-modal .price__item__total .js-value").text(o%1>0?o.toFixed(2):o),parseInt(i.rate)>0?$("#"+e.tariffType+"-modal .price__item__econom .js-value").text(this.priceToString(this.getRateSum(i))):$("#"+e.tariffType+"-modal .price__item__econom .js-value").text("0");break;case"mail_hosting":$("#"+e.tariffType+"-modal .price__item__tariff .js-value").text(i.cost_month%1>0?i.cost_month.toFixed(2):i.cost_month),$("#"+e.tariffType+"-modal .price__item__total .js-value").text(i.cost%1>0?i.cost.toFixed(2):i.cost)}this.button.attr("data-cart-period",a),$(document).trigger("modalTariff:periodChanged")},showModal:function(){switch("linux_hdd"===this.tariffType||"linux_ssd"===this.tariffType?$("#linux-modal .modal-header .modal-title span").text(this.tariff.title):$("#"+this.tariffType+"-modal .modal-header .modal-title span").text(this.tariff.title),this.setEcommerceData(),this.tariffType){case"linux_hdd":case"linux_ssd":this.setDefaultHosting(),$("#linux-modal .modal-footer button[data-cart-type]").attr("data-cart-type",this.tariffType),$("#linux-modal").on("shown.bs.modal",function(){$("#linux-modal .modal__list").setEqualHeights(".list__item-clean")}),$(window).resize(function(){$("#linux-modal").is(":visible")&&$("#linux-modal .modal__list").setEqualHeights(".list__item-clean")});break;case"vps":this.setDefaultVps();break;case"umi":case"bitrix":this.setDefaultBitrixUmi();break;case"mail_hosting":this.setDefaultMailHosting();break;case"solution":this.setDefaultSolution()}"linux_hdd"===this.tariffType||"linux_ssd"===this.tariffType?$("#linux-modal").modal({backdrop:"static"}):$("#"+this.tariffType+"-modal").modal({backdrop:"static"})},defaultSolutionLicenceHandlerAdded:!1,
setDefaultSolution:function(){var e=this,a=this.tariff.licence[this.idLicence]||null,i=!1;i="government-organization-portal"==this.tariff.name,this.button.attr("data-cart-period",1),this.button.attr("data-id",this.tariff.id),a&&this.button.attr("data-licence-id",a.id),$("#"+this.tariffType+"-modal .alert-danger").remove(),$("#"+e.tariffType+"-modal .price__item__total > span").html(" - "),$("#"+e.tariffType+"-modal .select-name-licences .select2-container--default .select2-selection--single").css("background-color","#eeeae7"),i?($("#"+e.tariffType+"-modal .select-name-vps .select2-container--default .select2-selection--single").css("background-color","#eeeae7"),$("#"+e.tariffType+"-modal .select-isp .select2-container--default .select2-selection--single").css("background-color","#eeeae7"),$("#"+e.tariffType+"-modal .select-templates .select2-container--default .select2-selection--single").css("background-color","#eeeae7")):($("#"+e.tariffType+"-modal .select-free-linux .select2-container--default .select2-selection--single").css("background-color","#eeeae7"),$("#"+e.tariffType+"-modal .select-free-linux-php .select2-container--default .select2-selection--single").css("background-color","#eeeae7"));var o="<option></option>";$.each(this.tariff.licence,function(t,e){o+='<option value="'+e.id+'" data-name="'+e.title+'">'+e.title+"</option>"}),$("#"+this.tariffType+"-modal .select-name-licences select").html(o),$("#"+this.tariffType+"-modal .select-name-licences select").css("width","100%"),$("#"+this.tariffType+"-modal .select-name-licences select").select2({minimumResultsForSearch:1/0,placeholder:"Лицензия не выбрана"}),i?($("#"+e.tariffType+"-modal .select-name-vps select").html("<option></option>"),$("#"+e.tariffType+"-modal .select-name-vps select").css("width","100%"),$("#"+e.tariffType+"-modal .select-name-vps select").select2({minimumResultsForSearch:1/0,placeholder:"Необходимо выбрать лицензию"}),$("#"+e.tariffType+"-modal .select-isp select").html("<option></option>"),$("#"+e.tariffType+"-modal .select-isp select").css("width","100%"),$("#"+e.tariffType+"-modal .select-isp select").select2({minimumResultsForSearch:1/0,placeholder:"Необходимо выбрать VPS"}),$("#"+e.tariffType+"-modal .select-templates select").html("<option></option>"),$("#"+e.tariffType+"-modal .select-templates select").css("width","100%"),$("#"+e.tariffType+"-modal .select-templates select").select2({minimumResultsForSearch:1/0,placeholder:"Необходимо выбрать панель управления"})):($("#"+e.tariffType+"-modal .select-free-linux select").html("<option></option>"),$("#"+e.tariffType+"-modal .select-free-linux select").css("width","100%"),$("#"+e.tariffType+"-modal .select-free-linux select").select2({minimumResultsForSearch:1/0,placeholder:"Необходимо выбрать лицензию"}),$("#"+e.tariffType+"-modal .select-free-linux-php select").html("<option></option>"),$("#"+e.tariffType+"-modal .select-free-linux-php select").css("width","100%"),$("#"+e.tariffType+"-modal .select-free-linux-php select").select2({minimumResultsForSearch:1/0,placeholder:"Необходимо указать тариф"})),this.defaultSolutionLicenceHandlerAdded||$("#"+this.tariffType+"-modal .select-name-licences select").on("change",function(a){var o=e.tariff.licence[a.target.value];if($("#"+e.tariffType+"-modal .modal-footer .js-modal-buy-button").attr("data-licence-id",o.id),$("#"+e.tariffType+"-modal .price__item__total > span").text(o.cost),i){for(var s in e.vpsLine)if(e.vpsLine[s].name==o.vps)var n=e.vpsLine[s];var r="<option></option>";r+='<option value="'+n.id+'" data-name="'+n.name_ru+' на 1 год" selected="true">'+n.name_ru+" на 1 год </option>",$("#"+e.tariffType+"-modal .select-name-vps select").html(r),$.post("/load/templates-isp/?tariff_id="+e.tariff.id,function(a){t.vpsTemplates=a.templates;var i="<option></option>";$.each(a.templates,function(t,e){var a=e.template;a.substr(1+a.lastIndexOf("-"));i+='<option value="'+e.id+'">'+e.info+"</option>"}),$("#"+e.tariffType+"-modal .select-templates select").html(i).change();var o="<option></option>";o+='<option value="0" data-cost="0">Без лицензии ISP</option>',$.each(a.isp,function(t,e){o+=1==e.is_checked?'<option value="'+t+'" data-name="'+e.name_short+'" data-cost="'+12*e.cost+'" selected="true">'+e.name+"</option>":'<option value="'+t+'" data-name="'+e.name_short+'" data-cost="'+12*e.cost+'">'+e.name+"</option>"}),$("#"+e.tariffType+"-modal .select-isp select").html(o)})}else{for(var s in e.bitrixLineHosting)if(e.bitrixLineHosting[s].name==o.hostingBitrix)var c=e.bitrixLineHosting[s].hosting;var l="<option></option>";$.each(c,function(t,e){l+='<option value="'+e.id+'" data-name="'+e.name_ru+" на "+e.period_ru+'">'+e.name_ru+" на "+e.period_ru+"</option>"}),$("#"+e.tariffType+"-modal .select-free-linux select").html(l),$("#"+e.tariffType+"-modal .select-free-linux select").on("select2:select",function(t){var a=t.params.data.id;if(a){var i=Tariff.getType("linux_ssd")[a],o=i.version_php;$("#"+e.tariffType+"-modal .select-free-linux-php select option").each(function(t,e){var a=$(e).val();a&&o.indexOf(a)!=-1?$(e).prop("disabled",!1):$(e).prop("disabled","disabled")}),$("#"+e.tariffType+"-modal .select-free-linux-php select").select2({minimumResultsForSearch:1/0,placeholder:"Выберите версию PHP"}),$("#"+e.tariffType+"-modal .select-free-linux-php select").val("").trigger("change")}$("#"+e.tariffType+"-modal .select-free-linux .select2-container--default .select2-selection--single").css("background-color","rgba(255, 172, 99, 0.25)")});var d="<option></option>",u=["7.4","7.3","7.2","7.1","7.0","5.6"];$.each(u,function(t,e){d+='<option value="'+e+'" disabled="disabled">PHP '+e+"</option>"}),$("#"+e.tariffType+"-modal .select-free-linux-php select").html(d),$("#"+e.tariffType+"-modal .select-free-linux-php select").css("width","100%"),$("#"+e.tariffType+"-modal .select-free-linux-php select").select2({minimumResultsForSearch:1/0,placeholder:"Необходимо указать тариф"}),$("#"+e.tariffType+"-modal .select-free-linux-php select").on("select2:select",function(t){$("#"+e.tariffType+"-modal .select-free-linux-php .select2-container--default .select2-selection--single").css("background-color","rgba(255, 172, 99, 0.25)")})}}),this.defaultSolutionLicenceHandlerAdded=!0,a&&$("#"+this.tariffType+"-modal .select-name-licences select").val(a.id).trigger("change")},setDefaultVps:function(){var e=this;this.button.attr("data-cart-period",12),this.button.attr("data-id",e.tariff.id),$("#"+this.tariffType+"-modal .alert-danger").remove(),$("#"+this.tariffType+"-modal .modal-discont").html(""),Object.keys(e.tariff.periods).forEach(function(t){var a=e.tariff.periods[t];if(a.rate>0){var i=Math.round(a.rate);$("#"+e.tariffType+"-period-m"+a.period).parent().find(".modal-discont").html("Скидка "+i+"%")}}),0==$("#"+this.tariffType+" .select-templates select option").length?$.post("/load/templates-isp/?tariff_id="+e.tariff.id,function(a){t.vpsTemplates=a.templates;var i="<option></option>";$.each(a.templates,function(t,a){var o=a.template,s=o.substr(1+o.lastIndexOf("-"));"ssd_kvm"!==e.vpsType&&"ssd_ovz"!==e.vpsType||"ispmgr5"!==s&&"ispmanager"!==s&&(i+='<option value="'+a.id+'">'+a.info+"</option>"),"hdd_ovz"===e.vpsType&&"ispmgr5"===s&&(i+='<option value="'+a.id+'">'+a.info+"</option>")}),$(".select-templates select").html(i).change(),$(".select-templates select").css("width","100%"),$(".select-templates select").select2({minimumResultsForSearch:1/0,placeholder:"Шаблон не выбран"}),$(".select-templates select").on("select2:select",function(t){$(".select-templates .select2-container--default .select2-selection--single").css("background-color","rgba(255, 172, 99, 0.25)")});var i="<option></option>";i+='<option value="0" data-cost="0">Без лицензии ISP</option>',$.each(a.isp,function(t,e){i+=1==e.is_checked?'<option value="'+t+'" data-name="'+e.name_short+'" data-cost="'+e.cost+'" selected="true">'+e.name+"  за "+e.cost+" руб.</option>":'<option value="'+t+'" data-name="'+e.name_short+'" data-cost="'+e.cost+'">'+e.name+"  за "+e.cost+" руб.</option>"}),$(".select-isp select").html(i),$(".select-isp select").css("width","100%"),$(".select-isp select").select2({minimumResultsForSearch:1/0,placeholder:"Панель ISP не выбрана"}),$(".select-isp select").on("select2:select",function(t){$(".select-isp .select2-container--default .select2-selection--single").css("background-color","rgba(255, 172, 99, 0.25)"),$("#"+e.tariffType+"-modal input[name=period]:checked").trigger("click")}),$(".select-ip input[name=ip]").attr("data-cost",a.ip.cost),$("#"+e.tariffType+"-modal input[name=period]:checked").trigger("click")}):($(".select-ip input[name=ip]").val(0),$(".select-ip .ip-total").text("0"),$(".select-isp select").val("").trigger("change"),$(".select-isp .select2-container--default .select2-selection--single").css("background-color","#eeeae7"),$(".select-templates select").val("").trigger("change"),$(".select-templates .select2-container--default .select2-selection--single").css("background-color","#eeeae7")),$("#"+this.tariffType+"-period-m12").trigger("click")},setDefaultBitrixUmi:function(){var t=this;this.button.attr("data-cart-period",1),this.button.attr("data-id",this.tariff.id),$("#"+this.tariffType+"-modal .alert-danger").remove(),$("#"+this.tariffType+"-modal .price__item__total > span").text(this.tariff.cost);var e="<option></option>";$.each(this.tariff.hosting,function(t,a){e+='<option value="'+a.id+'" data-name="'+a.name_ru+" на "+a.period_ru+'">'+a.name_ru+" на "+a.period_ru+"</option>"}),$("#"+this.tariffType+"-modal .select-free-linux select").html(e),$("#"+this.tariffType+"-modal .select-free-linux select").css("width","100%"),$("#"+this.tariffType+"-modal .select-free-linux select").select2({minimumResultsForSearch:1/0,placeholder:"Хостинг не выбран"}),$("#"+this.tariffType+"-modal .select-free-linux select").on("select2:select change",function(e){$("#"+t.tariffType+"-modal .select-free-linux .select2-container--default .select2-selection--single").css("background-color","rgba(255, 172, 99, 0.25)");var a=$("#"+t.tariffType+"-modal .select-free-linux select option:selected").val();if(a){var i=Tariff.getType("linux_ssd")[a],o=i.version_php;$("#"+t.tariffType+"-modal .select-free-linux-php select option").each(function(t,e){var a=$(e).val();a&&o.indexOf(a)!=-1?$(e).prop("disabled",!1):$(e).prop("disabled","disabled")}),$("#"+t.tariffType+"-modal .select-free-linux-php select").select2({minimumResultsForSearch:1/0,placeholder:"Выберите версию PHP"}),$("#"+t.tariffType+"-modal .select-free-linux-php select").val("").trigger("change")}});var a="<option></option>",i=["7.4","7.3","7.2","7.1","7.0","5.6"];$.each(i,function(t,e){a+='<option value="'+e+'" disabled="disabled">PHP '+e+"</option>"}),$("#"+this.tariffType+"-modal .select-free-linux-php select").html(a),$("#"+this.tariffType+"-modal .select-free-linux-php select").css("width","100%"),$("#"+this.tariffType+"-modal .select-free-linux-php select").select2({minimumResultsForSearch:1/0,placeholder:"Необходимо указать тариф"}),$("#"+this.tariffType+"-modal .select-free-linux-php select").on("select2:select",function(e){$("#"+t.tariffType+"-modal .select-free-linux-php .select2-container--default .select2-selection--single").css("background-color","rgba(255, 172, 99, 0.25)")}),this.selectedLinuxTariffForBitrix&&$("#"+this.tariffType+"-modal .select-free-linux select").val(this.selectedLinuxTariffForBitrix).change()},setDefaultHosting:function(){var t=this;this.button.attr("data-cart-period",12),this.button.attr("data-id",t.tariff.id),this.button.attr("data-cms-name",t.cms_name),$("#linux-modal .modal-discont").html(""),Object.keys(t.tariff.periods).forEach(function(e){var a=t.tariff.periods[e];if(a.rate>0){var i=Math.round(a.rate);$("#hosting-period-m"+a.period).parent().find(".modal-discont").html("Скидка "+i+"%")}}),$("#hosting-period-m12").trigger("click"),$("#linux-modal .price__item__econom").show(),function(){var e=[{value:"Joomla!",text:"Joomla"},{value:"WordPress",text:"WordPress"},{value:"Drupal",text:"Drupal"},{value:"OpenCart",text:"OpenCart"},{value:"MODx",text:"MODX"},{value:"osCommerce!",text:"osCommerce"},{value:"phpBB",text:"phpBB"},{value:"1C Bitrix",text:"1C-Битрикс"},{value:"UMI",text:"UMI CMS"}],a='<option value="none">Без предустановки</option>';e.map(function(t){a+='<option value="'+t.value+'">'+t.text+"</option>"});var i=$('#linux-modal [name="preinstall_cms"]');i.html(a).css("width","100%").select2({minimumResultsForSearch:1/0,placeholder:"Без предустановки"}),i.val(t.cms_name).trigger("change")}(),function(){var e=[{ver:"8.1",value:"php8.1",text:"PHP 8.1"},{ver:"8.0",value:"php8.0",text:"PHP 8.0"},{ver:"7.4",value:"php7.4",text:"PHP 7.4"},{ver:"7.3",value:"php7.3",text:"PHP 7.3"},{ver:"7.2",value:"php7.2",text:"PHP 7.2"},{ver:"7.1",value:"php7.1",text:"PHP 7.1"},{ver:"7.0",value:"php7.0",text:"PHP 7.0"},{ver:"5.6",value:"php5.6",text:"PHP 5.6"}],a=t.tariff.version_php.split(",").map(function(t){return t.trim()}),i="<option></option>";e.map(function(t){var e=a.indexOf(t.ver)===-1?"disabled":"";i+='<option value="'+t.value+'" '+e+">"+t.text+"</option>"});var o=$('#linux-modal [name="phpversion"]');o.html(i).css("width","100%").select2({minimumResultsForSearch:1/0,placeholder:"Выберите версию PHP"}),o.val("php5.6").trigger("change")}()},extractEcommerceData:function(t){var e=t.data();for(var a in e)e.hasOwnProperty(a)&&0===a.indexOf("ec")&&(this.ecommerceData[a]=e[a])},setEcommerceData:function(){for(var t in this.ecommerceData)this.ecommerceData.hasOwnProperty(t)&&this.button.data(t,this.ecommerceData[t])},setDefaultMailHosting:function(){$("#"+this.tariffType+"-modal .alert-danger").remove(),$("#"+this.tariffType+"-modal .js-domain-list__items").html(""),$("#"+this.tariffType+"-modal .js-domain-list__input").val(null),this.button.attr("data-cart-period",12),this.button.attr("data-id",this.tariff.id),$("#"+this.tariffType+"-period-m12").trigger("click")},initDomainAdd:function(){var t=function(){function t(t){return t=t.toLowerCase(),t=t.replace(/^((https?):\/\/)/,""),t=t.replace(/^www\./,""),t=t.split("/")[0],t=t.replace(/(^\.+|\.+$)/g,""),t=t.replace(/(\.){2,}/g,".")}function e(t){return/^([\da-zа-я\.-]+)\.([a-zа-я\.]{2,6})$/.test(t)}function a(t,a,i){return $("#mail_hosting-modal .alert-danger").remove(),a?t.find('.js-domain-list__item[data-domain="'+a+'"]').length?(i.val(null),!1):!!e(a)||(App.showError("Указан некорректный домен!","#mail_hosting-modal",".modal-body"),!1):(i.focus(),!1)}function i(t){var e=t.find(s.domainListItem),a="domain-list__item_inline";e.length>7?e.addClass(a):e.removeClass(a)}function o(t,e){t.append('<div class="domain-list__item js-domain-list__item" data-domain="'+e+'">                                <span class="domain-list__item-text">'+e+'</span>                                 <i class="ho ho-remove domain-list__item-remove-icon js-domain-list__remove-icon"></i>                            </div>')}var s={wrapper:".js-domain-list__wrapper",addButton:".js-domain-list__add-button",input:".js-domain-list__input",removeIcon:".js-domain-list__remove-icon",domainList:".js-domain-list__items",domainListItem:".js-domain-list__item"};return{selectors:s,add:function(){var e=$(this),n=e.closest(s.wrapper),r=n.find(s.domainList),c=n.find(s.input),l=t(c.val());a(r,l,c)&&(o(r,l),i(r),c.val(null))},remove:function(){var t=$(this),e=t.closest(s.domainList);t.closest(s.domainListItem).remove(),i(e)}}}();$(document).on("click",t.selectors.addButton,function(e){e.preventDefault(),t.add.call(this)}),$(document).on("keypress",t.selectors.input,function(e){13==e.keyCode&&t.add.call(this)}),$(document).on("click",t.selectors.removeIcon,t.remove)},getRateSum:function(t){var e=t.cost_month/(1-t.rate/100);return e=this.roundPrice(e),t.period*(e-t.cost_month)},roundPrice:function(t){return Math.round(100*t)/100},priceToString:function(t){return t%1>0?t.toFixed(2):String(t)},renderSuggestionsBlock:function(t){var e;e="linux_hdd"===this.tariffType||"linux_ssd"===this.tariffType?$("#linux-modal"):$("#"+this.tariffType+"-modal");var a=e.find(".js-suggestions-block");if(a.length){var i=e.find(".js-modal-buy-button"),o="",s="",n="javascript:void(0);";switch(this.tariffType){case"linux_hdd":case"linux_ssd":t.period>=12&&this.tariff.prop_domain_as_gift&&(o="Добавить к заказу бесплатный домен",s="Оформить заказ без домена",n=$("#domain-search").length?"#highlight:#domain-search":"/hosting/linux#highlight:#domain-search");break;case"vps":if(t.period>=12){o="Добавить к заказу бесплатный домен",s="Оформить заказ без домена";var r=$('.select-templates [name="template"]').val();r&&(n=$("#domain-search").length?"#highlight:#domain-search":"/hosting/linux#highlight:#domain-search")}}if(!o)return a.html(""),void i.html("<span>В корзину</span>");a.html('<a href="'+n+'" class="button js-suggestion-btn"><span>'+o+"</span></a>"),i.html("<span>"+s+"</span>")}}};t.init()})}(),function(){$(function(){var t={init:function(){this.formForgot(),this.formRegistr(),this.formLogin(),this.formLoginSuccess()},formForgot:function(){$("#form-forgot").submit(function(){var t=0,e=!1;switch($("#form-forgot input[type=text]").each(function(){var e=$.trim($(this).val());e.length>0&&t++}),t){case 0:e="Ни одно из полей не заполнено.";break;case 1:return $("#form-forgot button[type=submit]").attr("disabled",!0),$("#form-forgot button[type=submit]").html('<i class="ho ho-spinner ho-pulse" style="color:#F28C00;"></i>'),!0;case 2:case 3:e="Вы заполнили больше 1 поля."}return App.showError(e,"#form-forgot",".js-response-msg"),!1})},formRegistr:function(){$("#form-registr").length&&($(document).on("click",".js-type-switcher__controls [data-type]",function(){var t=$(this);if(!t.hasClass("active_type")){t.closest(".js-type-switcher__controls").find(".active_type").removeClass("active_type"),t.addClass("active_type");var e=t.data("type");t.closest(".js-type-switcher").find(".js-type-switcher__items [data-type]").hide(),t.closest(".js-type-switcher").find('.js-type-switcher__items [data-type~="'+e+'"]').show(),"ip"===e&&$('#form-registr [name="resident"]').prop("checked",!0),$("#form-registr input[name=type]").val(e)}}),$("#how_know_about_us").change(function(){var t="other"===this.value;$("#how_know_about_us_other").attr("disabled",!t).closest(".form-group")[t?"removeClass":"addClass"]("hidden")}),Cart.getObject().count>0&&Cart.getObject().total>0&&$.ajax({type:"POST",url:"/auth/save_cart",data:"cart="+JSON.stringify(Cart.getObject()),success:function(t){$.ajax({type:"POST",url:"/auth/get_google_url",data:"cart_id="+t.cart_id,success:function(t){$("#googleAuth").attr("href",t.url)}}),$.ajax({type:"POST",url:"/auth/get_fb_url",data:"cart_id="+t.cart_id,success:function(t){$("#fbAuth").attr("href",t.url)}})}}),$.ajax({type:"POST",url:"/auth/get_google_url",success:function(t){$("#googleAuth").attr("href",t.url)}}),$.ajax({type:"POST",url:"/auth/get_fb_url",success:function(t){$("#fbAuth").attr("href",t.url)}}),$("#form-registr").submit(function(){if(!$("#form-registr input[name=oferta]").is(":checked"))return App.showError("Не подтвердили оферту","#form-registr",".js-response-msg"),!1;var t=$("#form-registr input[name=type]").val();if("org"==t){if($.trim($("#form-registr input[name=org_name]").val()).length<4)return App.showError("Неверное название организации","#form-registr",".js-response-msg"),!1}else{var e=$.trim($("#form-registr input[name=fio_first_name]").val()),a=$.trim($("#form-registr input[name=fio_middle_name]").val()),i=$.trim($("#form-registr input[name=fio_last_name]").val()),o=/^[а-яё-]{2,25}$/i,s=[];if(o.test(e)||s.push("Имя"),o.test(a)||s.push("Отчество"),o.test(i)||s.push("Фамилия"),s.length)return App.showError("Неверно заполненны поля: "+s.join(", "),"#form-registr",".js-response-msg"),!1}return Cart.getObject().total>0&&(window.hosterAnalytics.registrationButtonClickWithOrder(),$("#form-registr input[name=cart]").val(JSON.stringify(Cart.getObject()))),$("#form-registr button[type=submit]").attr("disabled",!0),$("#form-registr button[type=submit]").html('<i class="ho ho-spinner ho-pulse" style="color:#F28C00;"></i>'),!0}),$(document).on("click",".oauth-button",function(t){t.preventDefault(),$("#form-registr input[name=oferta]").prop("checked")?($(this).html('<i class="ho ho-spinner ho-pulse" style="color:#F28C00;"></i>'),Cart.clear(),window.location=$(this).attr("href")):App.showError("Не подтвердили оферту","#form-registr",".js-response-msg")}))},formLoginSuccess:function(){if($("#form-login-success").length){if($(document).on("click",".login-file",function(t){$(this).attr("href","/auth/login-file?login="+$(this).data("login")+"&password="+$(this).data("password"))}),Cart.getObject().total>0){var t="&next=/service/services/orders",e=$("#form-login-success").attr("action")+t,a=Cart.getObject().items,i=this.getParams(a);i&&(e+=i),$("#form-login-success").attr("action",e),$("#form-login-success").submit(window.hosterAnalytics.loginButtonClickWithOrder)}Cart.clear()}},formLogin:function(){if($("#form-login").length){Cart.getObject().count>0&&Cart.getObject().total>0&&$.ajax({type:"POST",url:"/auth/save_cart",data:"cart="+JSON.stringify(Cart.getObject()),success:function(t){$.ajax({type:"POST",url:"/auth/get_google_url",data:"cart_id="+t.cart_id,success:function(t){$("#googleAuth").attr("href",t.url)}}),$.ajax({type:"POST",url:"/auth/get_fb_url",data:"cart_id="+t.cart_id,success:function(t){$("#fbAuth").attr("href",t.url)}})}}),$.ajax({type:"POST",url:"/auth/get_google_url",success:function(t){$("#googleAuth").attr("href",t.url)}}),$.ajax({type:"POST",url:"/auth/get_fb_url",success:function(t){$("#fbAuth").attr("href",t.url)}});var t=this;$(document).on("click",".login-file",function(t){$(this).attr("href","/auth/login-file?login="+$(this).data("login")+"&password="+$(this).data("password"))}),$("#form-login").submit(function(e){if($("#form-login button[type=submit]").attr("disabled",!0),$("#form-login button[type=submit]").html('<i class="ho ho-spinner ho-pulse" style="color:#F28C00;"></i>'),Cart.getObject().total>0){window.hosterAnalytics.loginButtonClickWithOrder(),$("#form-login input[name=cart]").val(JSON.stringify(Cart.getObject()));var a={},i="";$.ajax({type:"POST",url:"/auth/signin",async:!1,data:$("#form-login").serialize(),success:function(t){a=JSON.parse(t.cart_json),i=t.pre_url}});var o="?next=/service/services/orders",s=$("#form-login").attr("action")+o+i,n=Cart.getObject().items,r=t.getParams(n);r&&(s+=r),$("#form-login input[name=cart]").val(JSON.stringify(a)),$("#form-login").attr("action",s)}return Cart.clear(),!0}),$(document).on("click",".oauth-button",function(t){t.preventDefault(),$(this).html('<i class="ho ho-spinner ho-pulse" style="color:#F28C00;"></i>'),Cart.clear(),window.location=$(this).attr("href")})}},getParams:function(t){var e="";return $.isEmptyObject(t.bitrix)||(e="?bitrix=1"),$.isEmptyObject(t.umi)||(e?e+="&umi=1":e="?umi=1"),e}};t.init()})}(),$(function(){function t(t,i,s){o();var n=$(this),r=n.attr("href"),c=n.data("photoswipe-size"),l=i.push({src:r});l--,n.data("photoswipe-index",l),a(r,c,function(a){i[l].w=a.w,i[l].h=a.h,s?s(e):e(t,i)})}function e(t,e){console.log("init",t,e),$(document).on("click",t,function(t){t.preventDefault();var a=$(this).data("photoswipe-index");if("undefined"==typeof a)return void console.log("index",a);var i=$.extend({},n,{index:a}),o=new PhotoSwipe(s,PhotoSwipeUI_Default,e,i);o.init()})}function a(t,e,a){if(e)return e=e.split("x"),a({w:e[0],h:e[1]});var i=new Image;return i.src=t,i.width?a({w:i.width,h:i.height}):void(i.onload=function(){a({w:i.width,h:i.height})})}function i(){$("body").append('<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true"><div class="pswp__bg"></div><div class="pswp__scroll-wrap"><div class="pswp__container"><div class="pswp__item"></div><div class="pswp__item"></div><div class="pswp__item"></div></div><div class="pswp__ui pswp__ui--hidden"><div class="pswp__top-bar"><div class="pswp__counter"></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button><button class="pswp__button pswp__button--share" title="Share"></button><button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button><button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class="pswp__preloader"><div class="pswp__preloader__icn"><div class="pswp__preloader__cut"><div class="pswp__preloader__donut"></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class="pswp__share-tooltip"></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button><button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class="pswp__caption"><div class="pswp__caption__center text-center"></div></div></div></div></div>')}function o(){s||(s=$(".pswp"),s.length||(i(),s=$(".pswp")[0]))}var s,n={bgOpacity:.7,showHideOpacity:!0,history:!1,shareEl:!1,fullscreenEl:!1,closeOnScroll:!1};$(document).on("click",".js-photoswipe-gallery-with-data-items",function(t){t.preventDefault(),o();var e;try{e=JSON.parse($(this).data("gallery-items"))}catch(t){console.warn(t),e=[]}var a=Number($(this).attr("data-photoswipe-index")),i=$.extend({},n,{index:a}),r=new PhotoSwipe(s,PhotoSwipeUI_Default,e,i);r.init()});var r=".js-photoswipe-single",c=$(r);c.each(function(){t.call(this,r,[])}),$(".js-photoswipe-gallery").each(function(){o();var e=$(this),a=".js-photoswipe-gallery__item",i=e.find(a),s=i.length,n=0,r=[];i.each(function(){t.call(this,a,r,function(t){n++,n===s&&t(a,r)})})})}),$(function(){var t=function(){function t(){f.removeClass(r)}function e(t){return p.find("."+s+'[data-index="'+t+'"]')}function a(){return p.hasClass(n)}function i(){return h.hasClass(d)}function o(t){i()||(h.addClass(d),setTimeout(function(){h.removeClass(d),"function"==typeof t&&t()},u))}var s="mobile-menu__panel",n="mobile-menu_visible",r="mobile-menu__panel_active",c="mobile-menu-opened",l="mobile-menu-page-overflow",d="mobile-menu-animating",u=300,m=$("html"),h=$("body"),p=$("#mobile_menu"),f=p.find("."+s);return{open:function(t){a()||i()||(p.addClass(n),h.addClass(c),m.addClass(l),this.openPanel(t?t:f.first().data("index")),o())},close:function(){a()&&(i()||(p.removeClass(n),h.removeClass(c),t(),o(function(){m.removeClass(l)})))},toggle:function(){a()?this.close():this.open()},openPanel:function(t){i()||(window.history&&window.history.pushState&&window.localStorage&&(this.activePanelsStack.push(t),window.localStorage.setItem("activePanelsStack",this.activePanelsStack),window.history.pushState({mobileMenuState:!0},null,null)),e(t).addClass(r),o())},closePanel:function(t){i()||(p.find("."+r).length<=1?(window.localStorage&&(this.activePanelsStack=[],window.localStorage.setItem("activePanelsStack",this.activePanelsStack)),this.close()):(window.localStorage&&(this.activePanelsStack.pop(),window.localStorage.setItem("activePanelsStack",this.activePanelsStack)),e(t).removeClass(r),o()))},isOpened:a,closeAllPanels:t,activePanelsStack:[]}}();$(document).on("click",".js-open-mm",function(e){e.preventDefault(),t.toggle()}),$(document).on("click",".js-open-mm-auth",function(e){e.preventDefault(),t.isOpened()?t.openPanel($(this).data("index")):t.open($(this).data("index"))}),$(document).on("click",".js-open-mm-panel",function(e){e.preventDefault(),t.openPanel($(this).data("index"))}),$(document).on("click",".js-close-mm-panel",function(e){e.preventDefault(),t.closePanel($(this).data("index"))}),$(document).on("click",".mobile-menu [data-href]",function(){var t=$(this).data("href");t&&(window.location.href=t)}),$(window).resize(function(){$(this).width()>767&&t.close()}),function(){$(document).bind("touchmove",function(t){$("body").hasClass("mobile-menu-opened")&&t.preventDefault()});var t=$(".mobile-menu__panel, .mobile-menu__inner-list");t.each(function(){var t,e=$(this);e.on("touchstart",function(e){t=e.originalEvent.touches[0].clientY}),e.on("touchmove",function(e){var a=e.originalEvent.changedTouches[0].clientY;0===this.scrollTop&&a-t>0||this.scrollHeight-this.clientHeight===this.scrollTop&&a-t<0||e.stopPropagation()})})}(),window.history&&window.history.pushState&&window.localStorage&&(!function(){var t=window.localStorage.getItem("activePanelsStack");t&&(t=t.split(","),t.length>0&&window.history.state&&window.history.state.mobileMenuState&&(window.localStorage.setItem("activePanelsStack",""),window.history.go(-t.length)))}(),$(window).on("popstate",function(e){var a=e.originalEvent.state;a&&a.mobileMenuState&&$("body").hasClass("mobile-menu-opened")&&(t.activePanelsStack.length<=1?t.close():t.closePanel(t.activePanelsStack[t.activePanelsStack.length-1]))}))});var method="";$(document).on("submit",".js-form",function(t){t.preventDefault();var e=$(this),a=e.find(".js-form__response"),i=e.find("[name]"),o={};i.each(function(){var t=$(this),e=t.attr("name"),a=t.val(),i="checkbox"===t.attr("type");return i?void(o[e]=t.is(":checked")?"1":""):void(o[e]=a.trim())}),o.additionalInfo=window.userDataForAnalytics?JSON.stringify(userDataForAnalytics.get()):"",a.html(""),e.addClass("processing"),$.post({url:"/form/"+method,data:o,success:function(t){e.removeClass("processing");{if(!t.success)return t.error.length?void a.html('<div class="alert alert-danger text-xs-center" role="alert">'+t.error.join("<br>")+"</div>"):void a.html('<div class="alert alert-danger text-xs-center" role="alert">Возникла ошибка, попробуйте повторить через некоторое время</div>');e.find("input, textarea, button").attr("disabled",!0),a.html('<div class="alert alert-success text-xs-center" role="alert">'+t.success_message.join("<br>")+"</div>");try{window.yandexGoals.reach("form-request_"+o.action),window.gaGoals.reach("Form",o.action)}catch(i){window.console.error(i)}}}})}),$(document).on("click",'[data-toggle="modal"]',function(){var t=$(this),e=t.data("target"),a=$(e),i=t.data("form-action");method=t.data("form-method");var o=t.data("form-item"),s=t.data("form-add-text");i&&a.find('[name="action"]').val(i),method&&a.find('[name="method"]').val(method),o&&a.find('[name="item"]').val(o),a.find(".js-form__additional-text").html(""),s&&a.find(".js-form__additional-text").html("<p>"+s+"</p>")}),$("#form-registr").on("submit",function(){"object"==typeof FAN&&$(this).append('<input type="hidden" name="fan_user_id" value="'+FAN.getCookie("_fan_uid")+'"/>')}),$(document).on("click",".js-punycode-convert",function(t){t.preventDefault();var e=$(this),a=e.data("target");if(a){var i=$(a),o=punycode.toggle(i.val());i.val(o)}}),$(document).on("click",".js-show-user-ip",function(t){t.preventDefault();var e=$(this).data("ip"),a=$(this).data("target");e&&a&&$(a).val(e)}),$("#whois-form").submit(function(t){t.preventDefault();var e=$(this),a=$("#whois_container");a.empty();var i=$("#whois-check-button"),o='<i class="ho ho-spinner ho-pulse" style="color:#F28C00;"></i>';i.attr("disabled",!0),i.html(o),$.ajax({type:e.attr("method"),url:e.attr("action"),data:e.serialize()}).done(function(t){"undefined"!=typeof t.render&&a.html(t.render)}).always(function(){i.removeAttr("disabled"),i.html("<span>Проверить</span>")})});